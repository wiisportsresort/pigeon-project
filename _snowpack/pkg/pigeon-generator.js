var a=Object.assign;import{t as l}from"./common/index-d52892f5.js";class d{constructor({id:s,author:e,content:t,media:i,likes:o,parent:r,timestamp:h}){this.hydrated=!1,this.id=s,this.likes=o,this.authorName=e,this.content=t,this.media=i,this.parentId=r,this.timestamp=l(h)}hydrate({users:s,posts:e}){this.author=s.find(t=>t.username===this.authorName),this.comments=e.filter(t=>t.parentId===this.id),this.parentId&&(this.parent=e.find(t=>t.id===this.parentId)),this.hydrated=!0}}class u{constructor({username:s,displayName:e,followers:t,following:i,profileImage:o,bio:r,bannerImage:h,joinDate:m}){this.hydrated=!1,this.username=s,this.displayName=e,this._followers=t,this._following=i,this.bio=r,this.profileImage=o,this.bannerImage=h,this.joinDate=l(m)}hydrate({users:s,posts:e}){const t=s.map(i=>({[i.username]:i})).reduce((i,o)=>a(a({},i),o),{});this.followers=this._followers.map(i=>t[i]),this.following=this._following.map(i=>t[i]),this.posts=e.filter(i=>i.authorName===this.username),this.hydrated=!0}}class p{constructor(s){this.data=s,this.hydrated=!1,this.users=[],this.posts=[],s.users.forEach(e=>{this.users.push(new u({username:e.username,displayName:e.displayName,followers:s.follows.filter(t=>t.follows===e.username).map(t=>t.user),following:s.follows.filter(t=>t.user===e.username).map(t=>t.follows),bio:e.bio,profileImage:e.profileImage,bannerImage:e.bannerImage,joinDate:e.joinDate}))}),s.posts.forEach(e=>{this.posts.push(new d({parent:e.parent,id:e.id,likes:e.likes,author:e.author,content:e.content,media:e.media,timestamp:e.timestamp}))}),this._userObj=this.users.map(e=>({[e.username.toLowerCase()]:e})).reduce((e,t)=>a(a({},e),t),{}),this._postObj=this.posts.map(e=>({[e.id]:e})).reduce((e,t)=>a(a({},e),t),{})}getUser(s){return s?this._userObj[s.toLowerCase()]:void 0}getPost(s){return s?this._postObj[s]:void 0}hydrate(){this.users.map(s=>s.hydrate(this)),this.posts.map(s=>s.hydrate(this)),this.hydrated=!0}}const f=[{username:"beowulf",displayName:"Beowulf \u2694\uFE0F",bio:"the best hero around",profileImage:{type:"image",src:"profile/beowulf.png"},joinDate:-315503424e5},{username:"hrothgar",displayName:"Hrothgar",bio:"king of somewhere idk",joinDate:-31470336e6},{username:"wiglaf",displayName:"Wiglaf",bio:"warrior in the making",joinDate:-314038944e5}],g=[{id:"oEAmiCWOvyz7JDHldLsHk",author:"beowulf",content:"what is this new social media thing people are on about",media:[],likes:15,timestamp:-3139244532e4},{parent:"oEAmiCWOvyz7JDHldLsHk",id:"FhGwnds8A2pwF0IzdpKz5",author:"hrothgar",content:"Sounds interesting. Post your greatest thoughts for all to see!",media:[],likes:7,timestamp:-3139243872e4},{id:"mdg2pKguq5TIceSs0Dibd",author:"hrothgar",content:"How's everyone doing on this fine day? Just finished the new mead hall!",media:[],likes:13,timestamp:-3138104772e4},{parent:"mdg2pKguq5TIceSs0Dibd",id:"y1vsOwI-96P2-iXxAk00r",author:"beowulf",content:"I'm having a great day!",media:[],likes:6,timestamp:-3138104508e4},{parent:"y1vsOwI-96P2-iXxAk00r",id:"x6g4YD-FxEK3ZW_3BD6sE",author:"hrothgar",content:"Glad you're doing well. Come visit sometime!",media:[],likes:5,timestamp:-3138103932e4},{id:"RqliU3CTlYFHdHADAir73",author:"hrothgar",content:"<b>What</b> in the world is that beast?!<br /><br />It's running around and killing people in Heorot!!",media:[{src:"grendel-wikipedia.jpg",type:"image",caption:"what"}],likes:45,timestamp:-3122980782e4},{parent:"RqliU3CTlYFHdHADAir73",id:"YjZ5U7xf6xbMA5Q2FkI0n",author:"beowulf",content:"What??? That looks crazy!! Don't worry, I'm heading over to help in 12 years",media:[],likes:50,timestamp:-312298056e5},{id:"53hg6Dm2DvuUkR24FjskQ",author:"beowulf",content:"The danes are in trouble. I am determined to stop that beast that is ravaging the people.<br /><br />Wish me luck.",media:[],likes:1033,timestamp:-3084632034e4},{parent:"53hg6Dm2DvuUkR24FjskQ",id:"_Sng2xmYOCPXnh6lFwSr3",author:"hrothgar",content:"please we are having lots of trouble",media:[],likes:199,timestamp:-308462202e5}],w=[{user:"hrothgar",follows:"beowulf"},{user:"beowulf",follows:"wiglaf"},{user:"beowulf",follows:"hrothgar"},{user:"wiglaf",follows:"beowulf"},{user:"wiglaf",follows:"hrothgar"}];var c={users:f,posts:g,follows:w};export{p as Hydrator,c as hydratorData};
