var $=String.prototype.replace,I=/%20/g,P={RFC1738:"RFC1738",RFC3986:"RFC3986"},x={default:P.RFC3986,formatters:{RFC1738:function(a){return $.call(a,I,"+")},RFC3986:function(a){return String(a)}},RFC1738:P.RFC1738,RFC3986:P.RFC3986},D=Object.prototype.hasOwnProperty,j=Array.isArray,b=function(){for(var a=[],e=0;e<256;++e)a.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return a}(),M=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(j(n)){for(var f=[],l=0;l<n.length;++l)typeof n[l]!="undefined"&&f.push(n[l]);r.obj[r.prop]=f}}},R=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},f=0;f<e.length;++f)typeof e[f]!="undefined"&&(n[f]=e[f]);return n},k=function a(e,r,n){if(!r)return e;if(typeof r!="object"){if(j(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!D.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var f=e;return j(e)&&!j(r)&&(f=R(e,n)),j(e)&&j(r)?(r.forEach(function(l,i){if(D.call(e,i)){var u=e[i];u&&typeof u=="object"&&l&&typeof l=="object"?e[i]=a(u,l,n):e.push(l)}else e[i]=l}),e):Object.keys(r).reduce(function(l,i){var u=r[i];return D.call(l,i)?l[i]=a(l[i],u,n):l[i]=u,l},f)},U=function(e,r){return Object.keys(r).reduce(function(n,f){return n[f]=r[f],n},e)},K=function(a,e,r){var n=a.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(f){return n}},G=function(e,r,n,f,l){if(e.length===0)return e;var i=e;if(typeof e=="symbol"?i=Symbol.prototype.toString.call(e):typeof e!="string"&&(i=String(e)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var u="",o=0;o<i.length;++o){var t=i.charCodeAt(o);if(t===45||t===46||t===95||t===126||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||l===x.RFC1738&&(t===40||t===41)){u+=i.charAt(o);continue}if(t<128){u=u+b[t];continue}if(t<2048){u=u+(b[192|t>>6]+b[128|t&63]);continue}if(t<55296||t>=57344){u=u+(b[224|t>>12]+b[128|t>>6&63]+b[128|t&63]);continue}o+=1,t=65536+((t&1023)<<10|i.charCodeAt(o)&1023),u+=b[240|t>>18]+b[128|t>>12&63]+b[128|t>>6&63]+b[128|t&63]}return u},W=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],f=0;f<r.length;++f)for(var l=r[f],i=l.obj[l.prop],u=Object.keys(i),o=0;o<u.length;++o){var t=u[o],c=i[t];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(r.push({obj:i,prop:t}),n.push(c))}return M(r),e},_=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},J=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},X=function(e,r){return[].concat(e,r)},Y=function(e,r){if(j(e)){for(var n=[],f=0;f<e.length;f+=1)n.push(r(e[f]));return n}return r(e)},g={arrayToObject:R,assign:U,combine:X,compact:W,decode:K,encode:G,isBuffer:J,isRegExp:_,maybeMap:Y,merge:k},Z=Object.prototype.hasOwnProperty,T={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},w=Array.isArray,q=Array.prototype.push,L=function(a,e){q.apply(a,w(e)?e:[e])},ee=Date.prototype.toISOString,H=x.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:g.encode,encodeValuesOnly:!1,format:H,formatter:x.formatters[H],indices:!1,serializeDate:function(e){return ee.call(e)},skipNulls:!1,strictNullHandling:!1},re=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ne=function a(e,r,n,f,l,i,u,o,t,c,h,m,v,y){var d=e;if(typeof u=="function"?d=u(r,d):d instanceof Date?d=c(d):n==="comma"&&w(d)&&(d=g.maybeMap(d,function(E){return E instanceof Date?c(E):E})),d===null){if(f)return i&&!v?i(r,p.encoder,y,"key",h):r;d=""}if(re(d)||g.isBuffer(d)){if(i){var B=v?r:i(r,p.encoder,y,"key",h);return[m(B)+"="+m(i(d,p.encoder,y,"value",h))]}return[m(r)+"="+m(String(d))]}var N=[];if(typeof d=="undefined")return N;var S;if(n==="comma"&&w(d))S=[{value:d.length>0?d.join(",")||null:void 0}];else if(w(u))S=u;else{var A=Object.keys(d);S=o?A.sort(o):A}for(var F=0;F<S.length;++F){var O=S[F],Q=typeof O=="object"&&O.value!==void 0?O.value:d[O];if(!(l&&Q===null)){var V=w(d)?typeof n=="function"?n(r,O):r:r+(t?"."+O:"["+O+"]");L(N,a(Q,V,n,f,l,i,u,o,t,c,h,m,v,y))}}return N},te=function(e){if(!e)return p;if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||p.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=x.default;if(typeof e.format!="undefined"){if(!Z.call(x.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var f=x.formatters[n],l=p.filter;return(typeof e.filter=="function"||w(e.filter))&&(l=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:p.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?p.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:p.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?p.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:p.encode,encoder:typeof e.encoder=="function"?e.encoder:p.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:p.encodeValuesOnly,filter:l,format:n,formatter:f,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:p.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:p.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:p.strictNullHandling}},ae=function(a,e){var r=a,n=te(e),f,l;typeof n.filter=="function"?(l=n.filter,r=l("",r)):w(n.filter)&&(l=n.filter,f=l);var i=[];if(typeof r!="object"||r===null)return"";var u;e&&e.arrayFormat in T?u=e.arrayFormat:e&&"indices"in e?u=e.indices?"indices":"repeat":u="indices";var o=T[u];f||(f=Object.keys(r)),n.sort&&f.sort(n.sort);for(var t=0;t<f.length;++t){var c=f[t];n.skipNulls&&r[c]===null||L(i,ne(r[c],c,o,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}var h=i.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),h.length>0?m+h:""},C=Object.prototype.hasOwnProperty,ie=Array.isArray,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:g.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},fe=function(a){return a.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},z=function(a,e){return a&&typeof a=="string"&&e.comma&&a.indexOf(",")>-1?a.split(","):a},le="utf8=%26%2310003%3B",ue="utf8=%E2%9C%93",oe=function(e,r){var n={},f=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=r.parameterLimit===Infinity?void 0:r.parameterLimit,i=f.split(r.delimiter,l),u=-1,o,t=r.charset;if(r.charsetSentinel)for(o=0;o<i.length;++o)i[o].indexOf("utf8=")===0&&(i[o]===ue?t="utf-8":i[o]===le&&(t="iso-8859-1"),u=o,o=i.length);for(o=0;o<i.length;++o)if(o!==u){var c=i[o],h=c.indexOf("]="),m=h===-1?c.indexOf("="):h+1,v,y;m===-1?(v=r.decoder(c,s.decoder,t,"key"),y=r.strictNullHandling?null:""):(v=r.decoder(c.slice(0,m),s.decoder,t,"key"),y=g.maybeMap(z(c.slice(m+1),r),function(d){return r.decoder(d,s.decoder,t,"value")})),y&&r.interpretNumericEntities&&t==="iso-8859-1"&&(y=fe(y)),c.indexOf("[]=")>-1&&(y=ie(y)?[y]:y),C.call(n,v)?n[v]=g.combine(n[v],y):n[v]=y}return n},ce=function(a,e,r,n){for(var f=n?e:z(e,r),l=a.length-1;l>=0;--l){var i,u=a[l];if(u==="[]"&&r.parseArrays)i=[].concat(f);else{i=r.plainObjects?Object.create(null):{};var o=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,t=parseInt(o,10);!r.parseArrays&&o===""?i={0:f}:!isNaN(t)&&u!==o&&String(t)===o&&t>=0&&r.parseArrays&&t<=r.arrayLimit?(i=[],i[t]=f):i[o]=f}f=i}return f},de=function(e,r,n,f){if(!!e){var l=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,o=n.depth>0&&i.exec(l),t=o?l.slice(0,o.index):l,c=[];if(t){if(!n.plainObjects&&C.call(Object.prototype,t)&&!n.allowPrototypes)return;c.push(t)}for(var h=0;n.depth>0&&(o=u.exec(l))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&C.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+l.slice(o.index)+"]"),ce(c,r,n,f)}},se=function(e){if(!e)return s;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset=="undefined"?s.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?s.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:s.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:s.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:s.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:s.comma,decoder:typeof e.decoder=="function"?e.decoder:s.decoder,delimiter:typeof e.delimiter=="string"||g.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:s.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:s.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:s.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:s.strictNullHandling}},ye=function(a,e){var r=se(e);if(a===""||a===null||typeof a=="undefined")return r.plainObjects?Object.create(null):{};for(var n=typeof a=="string"?oe(a,r):a,f=r.plainObjects?Object.create(null):{},l=Object.keys(n),i=0;i<l.length;++i){var u=l[i],o=de(u,n[u],r,typeof a=="string");f=g.merge(f,o,r)}return g.compact(f)},pe={formats:x,parse:ye,stringify:ae};export default pe;
