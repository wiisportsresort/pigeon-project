import{a as be,b as Te,c as Ye,d as Qe,e as N,g as De}from"/pigeon-project/chunk.37OIGOVV.js";import{A as D,B as J,D as _e,E as ke,F as ge,G as Ve,H as Me,d as We,e as P,f as Xe,h as n,i as V,j as U,k as f,l as $,m as v,p as d,q as B,r as R,y as Ue,z as Oe}from"/pigeon-project/chunk.KG6B6XGW.js";function A(e){return e}function Fe(e){let l;return{c(){l=f("div"),d(l,"class","link link-top svelte-1g7n97q")},m(u,p){V(u,l,p)},d(u){u&&U(l)}}}function Ge(e){let l;return{c(){l=f("div"),d(l,"class","link link-bottom svelte-1g7n97q")},m(u,p){V(u,l,p)},d(u){u&&U(l)}}}function He(e){var j;let l,u,p,k,r=((j=e[0].parent.author)==null?void 0:j.username)+"",o,i,m,S;return{c(){l=f("span"),u=$(`Replying to
        `),p=f("strong"),k=$("@"),o=$(r),d(p,"class","svelte-1g7n97q"),d(l,"class","parent svelte-1g7n97q")},m(q,a){V(q,l,a),n(l,u),n(l,p),n(p,k),n(p,o),m||(S=N(i=e[4].call(null,l,A(e[0].parent))),m=!0)},p(q,a){var _;a&1&&r!==(r=((_=q[0].parent.author)==null?void 0:_.username)+"")&&B(o,r),i&&P(i.update)&&a&1&&i.update.call(null,A(q[0].parent))},d(q){q&&U(l),m=!1,S()}}}function Je(e){let l,u,p,k,r=e[8].default,o=Te(r,e,e[7],null);return{c(){l=f("div"),u=f("hr"),p=v(),o&&o.c(),d(l,"class","svelte-1g7n97q")},m(i,m){V(i,l,m),n(l,u),n(l,p),o&&o.m(l,null),k=!0},p(i,m){o&&o.p&&m&128&&Ye(o,r,i,i[7],m,null,null)},i(i){k||(D(o,i),k=!0)},o(i){J(o,i),k=!1},d(i){i&&U(l),o&&o.d(i)}}}function Ze(e){var Pe,Re;let l,u,p,k,r,o,i,m,S,j,q,a,_,w,K,M,L,ie,W=((Pe=e[0].author)==null?void 0:Pe.displayName)+"",se,he,O,qe,X=((Re=e[0].author)==null?void 0:Re.username)+"",ue,Y,Ie,Q,Z=e[0].content+"",oe,y,we,fe,C,E,F,$e,re,x=e[0].likes+"",de,je,G,Le,z,H,Ce,pe,ee=e[5](e[0])+"",ce,le,Ee,te,ne=e[0].id+"",me,ae,I,ve,Ne,b=(e[2]==="linked-top"||e[2]==="linked-full")&&Fe(e),h=(e[2]==="linked-bottom"||e[2]==="linked-full")&&Ge(e),g=e[0].parent&&He(e),c=e[6].default&&Je(e);return F=new be({props:{icon:"arrow-up"}}),G=new be({props:{icon:"arrow-down"}}),H=new be({props:{icon:"message-square"}}),{c(){var t,s,T;l=f("div"),u=f("div"),k=v(),r=f("div"),b&&b.c(),o=v(),i=f("img"),S=v(),h&&h.c(),q=v(),a=f("div"),_=f("div"),K=v(),g&&g.c(),M=v(),L=f("span"),ie=f("b"),se=$(W),he=v(),O=f("span"),qe=$("@"),ue=$(X),Ie=v(),Q=f("span"),oe=$(Z),we=v(),c&&c.c(),fe=v(),C=f("div"),E=f("span"),_e(F.$$.fragment),$e=v(),re=f("span"),de=$(x),je=v(),_e(G.$$.fragment),Le=v(),z=f("span"),_e(H.$$.fragment),Ce=v(),pe=f("span"),ce=$(ee),Ee=v(),te=f("span"),me=$(ne),d(u,"class","post-background svelte-1g7n97q"),i.src!==(m=(T=(s=(t=e[0].author)==null?void 0:t.profileImage)==null?void 0:s.src)!=null?T:"default.png")&&d(i,"src",m),d(i,"alt","profile"),d(i,"class","svelte-1g7n97q"),d(r,"class","image-col svelte-1g7n97q"),d(_,"class","post-background svelte-1g7n97q"),d(O,"class","gray svelte-1g7n97q"),d(L,"class","header svelte-1g7n97q"),d(Q,"class","content svelte-1g7n97q"),d(E,"class","likes svelte-1g7n97q"),d(z,"class","comments svelte-1g7n97q"),d(te,"class","id svelte-1g7n97q"),d(C,"class","interactions svelte-1g7n97q"),d(a,"class","body svelte-1g7n97q"),d(l,"class","post-card svelte-1g7n97q"),R(l,"interactive",e[1]==="full"),R(l,"is-reply",!!e[0].parent),R(l,"linked-top",e[2]==="linked-top"||e[2]==="linked-full"),R(l,"linked-bottom",e[2]==="linked-bottom"||e[2]==="linked-full")},m(t,s){V(t,l,s),n(l,u),n(l,k),n(l,r),b&&b.m(r,null),n(r,o),n(r,i),n(r,S),h&&h.m(r,null),n(l,q),n(l,a),n(a,_),n(a,K),g&&g.m(a,null),n(a,M),n(a,L),n(L,ie),n(ie,se),n(L,he),n(L,O),n(O,qe),n(O,ue),n(a,Ie),n(a,Q),n(Q,oe),n(a,we),c&&c.m(a,null),n(a,fe),n(a,C),n(C,E),ke(F,E,null),n(E,$e),n(E,re),n(re,de),n(E,je),ke(G,E,null),n(C,Le),n(C,z),ke(H,z,null),n(z,Ce),n(z,pe),n(pe,ce),n(C,Ee),n(C,te),n(te,me),I=!0,ve||(Ne=[N(p=e[4].call(null,u,e[0])),N(j=e[3].call(null,r,A(e[0].author))),N(w=e[4].call(null,_,e[0])),N(Y=e[3].call(null,L,A(e[0].author))),N(y=e[4].call(null,Q,e[0])),N(le=e[4].call(null,z,e[0])),N(ae=e[4].call(null,C,e[0]))],ve=!0)},p(t,[s]){var T,Se,ze,Ae,Be;p&&P(p.update)&&s&1&&p.update.call(null,t[0]),t[2]==="linked-top"||t[2]==="linked-full"?b||(b=Fe(t),b.c(),b.m(r,o)):b&&(b.d(1),b=null),(!I||s&1&&i.src!==(m=(ze=(Se=(T=t[0].author)==null?void 0:T.profileImage)==null?void 0:Se.src)!=null?ze:"default.png"))&&d(i,"src",m),t[2]==="linked-bottom"||t[2]==="linked-full"?h||(h=Ge(t),h.c(),h.m(r,null)):h&&(h.d(1),h=null),j&&P(j.update)&&s&1&&j.update.call(null,A(t[0].author)),w&&P(w.update)&&s&1&&w.update.call(null,t[0]),t[0].parent?g?g.p(t,s):(g=He(t),g.c(),g.m(a,M)):g&&(g.d(1),g=null),(!I||s&1)&&W!==(W=((Ae=t[0].author)==null?void 0:Ae.displayName)+"")&&B(se,W),(!I||s&1)&&X!==(X=((Be=t[0].author)==null?void 0:Be.username)+"")&&B(ue,X),Y&&P(Y.update)&&s&1&&Y.update.call(null,A(t[0].author)),(!I||s&1)&&Z!==(Z=t[0].content+"")&&B(oe,Z),y&&P(y.update)&&s&1&&y.update.call(null,t[0]),t[6].default?c?(c.p(t,s),s&64&&D(c,1)):(c=Je(t),c.c(),D(c,1),c.m(a,fe)):c&&(Ue(),J(c,1,1,()=>{c=null}),Oe()),(!I||s&1)&&x!==(x=t[0].likes+"")&&B(de,x),(!I||s&1)&&ee!==(ee=t[5](t[0])+"")&&B(ce,ee),le&&P(le.update)&&s&1&&le.update.call(null,t[0]),(!I||s&1)&&ne!==(ne=t[0].id+"")&&B(me,ne),ae&&P(ae.update)&&s&1&&ae.update.call(null,t[0]),s&2&&R(l,"interactive",t[1]==="full"),s&1&&R(l,"is-reply",!!t[0].parent),s&4&&R(l,"linked-top",t[2]==="linked-top"||t[2]==="linked-full"),s&4&&R(l,"linked-bottom",t[2]==="linked-bottom"||t[2]==="linked-full")},i(t){I||(D(c),D(F.$$.fragment,t),D(G.$$.fragment,t),D(H.$$.fragment,t),I=!0)},o(t){J(c),J(F.$$.fragment,t),J(G.$$.fragment,t),J(H.$$.fragment,t),I=!1},d(t){t&&U(l),b&&b.d(),h&&h.d(),g&&g.d(),c&&c.d(),ge(F),ge(G),ge(H),ve=!1,We(Ne)}}}function ye(e,l,u){let{$$slots:p={},$$scope:k}=l,r=Qe(p),{post:o}=l,{interactive:i=void 0}=l,{type:m=void 0}=l,S=(a,_,...w)=>{i&&(a.classList.add("interactive"),a.addEventListener("click",()=>De(`#/user/${_.username}`)))},j=(a,_,...w)=>{i==="full"&&(a.classList.add("interactive"),a.addEventListener("click",()=>De(`#/post/${_.id}`)))},q=a=>{var _,w;let K=0;return K+=a.comments?a.comments.length+((w=(_=a.comments)===null||_===void 0?void 0:_.map(q).reduce((M,L)=>M+L,0))!==null&&w!==void 0?w:0):0,K};return e.$$set=a=>{"post"in a&&u(0,o=a.post),"interactive"in a&&u(1,i=a.interactive),"type"in a&&u(2,m=a.type),"$$scope"in a&&u(7,k=a.$$scope)},[o,i,m,S,j,q,r,k,p]}var Ke=class extends Me{constructor(l){super();Ve(this,l,ye,Ze,Xe,{post:0,interactive:1,type:2})}},ul=Ke;export{A as a,ul as b};
