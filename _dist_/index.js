import{A as C,B as E,C as B,D as L,E as I,F as q,G as x,H as k,a as y,b as je,c as U,f as v,h as b,i as g,j as w,k as m,l as R,m as X,n as G,o as Ie,p,q as ce,r as oe,s as Fe,t as Ve,v as be,w as We,x as M,y as Z,z as ee}from"/pigeon-project/chunk.KG6B6XGW.js";var F={MODE:"production",NODE_ENV:"production",SSR:!1};function J(){if(!be)throw new Error("Function called outside component initialization");return be}function ve(o){J().$$.after_update.push(o)}function ke(){let o=J();return(e,t)=>{let n=o.$$.callbacks[e];if(n){let s=Fe(e,t);n.slice().forEach(a=>{a.call(o,s)})}}}function K(o,e){let t=o.$$.callbacks[e.type];t&&t.slice().forEach(n=>n(e))}function W(o,e){let t={},n={},s={$$scope:1},a=o.length;for(;a--;){let l=o[a],i=e[a];if(i){for(let r in l)r in i||(n[r]=1);for(let r in i)s[r]||(t[r]=i[r],s[r]=1);o[a]=i}else for(let r in l)s[r]=1}for(let l in n)l in t||(t[l]=void 0);return t}function V(o){return typeof o=="object"&&o!==null?o:{}}function P(o){if(!o)throw Error("Parameter args is required");if(!o.component==!o.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(o.component&&(o.asyncComponent=()=>Promise.resolve(o.component)),typeof o.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(o.conditions){Array.isArray(o.conditions)||(o.conditions=[o.conditions]);for(let t=0;t<o.conditions.length;t++)if(!o.conditions[t]||typeof o.conditions[t]!="function")throw Error("Invalid parameter conditions["+t+"]")}return o.loadingComponent&&(o.asyncComponent.loading=o.loadingComponent,o.asyncComponent.loadingParams=o.loadingParams||void 0),{component:o.asyncComponent,userData:o.userData,conditions:o.conditions&&o.conditions.length?o.conditions:void 0,props:o.props&&Object.keys(o.props).length?o.props:{},_sveltesparouter:!0}}function xe(o,e){if(o instanceof RegExp)return{keys:!1,pattern:o};var t,n,s,a,l=[],i="",r=o.split("/");for(r[0]||r.shift();s=r.shift();)t=s[0],t==="*"?(l.push("wild"),i+="/(.*)"):t===":"?(n=s.indexOf("?",1),a=s.indexOf(".",1),l.push(s.substring(1,~n?n:~a?a:s.length)),i+=!!~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(i+=(~n?"?":"")+"\\"+s.substring(a))):i+="/"+s;return{keys:l,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Ee(o){let e,t,n,s=[o[2]];var a=o[0];function l(i){let r={};for(let f=0;f<s.length;f+=1)r=je(r,s[f]);return{props:r}}return a&&(e=new a(l()),e.$on("routeEvent",o[7])),{c(){e&&L(e.$$.fragment),t=G()},m(i,r){e&&I(e,i,r),g(i,t,r),n=!0},p(i,r){let f=r&4?W(s,[V(i[2])]):{};if(a!==(a=i[0])){if(e){Z();let d=e;E(d.$$.fragment,1,0,()=>{q(d,1)}),ee()}a?(e=new a(l()),e.$on("routeEvent",i[7]),L(e.$$.fragment),C(e.$$.fragment,1),I(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(i){n||(e&&C(e.$$.fragment,i),n=!0)},o(i){e&&E(e.$$.fragment,i),n=!1},d(i){i&&w(t),e&&q(e,i)}}}function Ce(o){let e,t,n,s=[{params:o[1]},o[2]];var a=o[0];function l(i){let r={};for(let f=0;f<s.length;f+=1)r=je(r,s[f]);return{props:r}}return a&&(e=new a(l()),e.$on("routeEvent",o[6])),{c(){e&&L(e.$$.fragment),t=G()},m(i,r){e&&I(e,i,r),g(i,t,r),n=!0},p(i,r){let f=r&6?W(s,[r&2&&{params:i[1]},r&4&&V(i[2])]):{};if(a!==(a=i[0])){if(e){Z();let d=e;E(d.$$.fragment,1,0,()=>{q(d,1)}),ee()}a?(e=new a(l()),e.$on("routeEvent",i[6]),L(e.$$.fragment),C(e.$$.fragment,1),I(e,t.parentNode,t)):e=null}else a&&e.$set(f)},i(i){n||(e&&C(e.$$.fragment,i),n=!0)},o(i){e&&E(e.$$.fragment,i),n=!1},d(i){i&&w(t),e&&q(e,i)}}}function Se(o){let e,t,n,s,a=[Ce,Ee],l=[];function i(r,f){return r[1]?0:1}return e=i(o),t=l[e]=a[e](o),{c(){t.c(),n=G()},m(r,f){l[e].m(r,f),g(r,n,f),s=!0},p(r,[f]){let d=e;e=i(r),e===d?l[e].p(r,f):(Z(),E(l[d],1,1,()=>{l[d]=null}),ee(),t=l[e],t?t.p(r,f):(t=l[e]=a[e](r),t.c()),C(t,1),t.m(n.parentNode,n))},i(r){s||(C(t),s=!0)},o(r){E(t),s=!1},d(r){l[e].d(r),r&&w(n)}}}function Ne(o,e,t){let{routes:n={}}=e,{prefix:s=""}=e,{restoreScrollState:a=!1}=e;class l{constructor(c,h){if(!h||typeof h!="function"&&(typeof h!="object"||h._sveltesparouter!==!0))throw Error("Invalid component object");if(!c||typeof c=="string"&&(c.length<1||c.charAt(0)!="/"&&c.charAt(0)!="*")||typeof c=="object"&&!(c instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');let{pattern:j,keys:_}=xe(c);this.path=c,typeof h=="object"&&h._sveltesparouter===!0?(this.component=h.component,this.conditions=h.conditions||[],this.userData=h.userData,this.props=h.props||{}):(this.component=()=>Promise.resolve(h),this.conditions=[],this.props={}),this._pattern=j,this._keys=_}match(c){if(s){if(typeof s=="string")if(c.startsWith(s))c=c.substr(s.length)||"/";else return null;else if(s instanceof RegExp){let $=c.match(s);if($&&$[0])c=c.substr($[0].length)||"/";else return null}}let h=this._pattern.exec(c);if(h===null)return null;if(this._keys===!1)return h;let j={},_=0;for(;_<this._keys.length;){try{j[this._keys[_]]=decodeURIComponent(h[_+1]||"")||null}catch($){j[this._keys[_]]=null}_++}return j}async checkConditions(c){for(let h=0;h<this.conditions.length;h++)if(!await this.conditions[h](c))return!1;return!0}}let i=[];n instanceof Map?n.forEach((u,c)=>{i.push(new l(c,u))}):Object.keys(n).forEach(u=>{i.push(new l(u,n[u]))});let r=null,f=null,d={},Y=ke();async function A(u,c){await We(),Y(u,c)}let S=null;a&&(window.addEventListener("popstate",u=>{u.state&&u.state.scrollY?S=u.state:S=null}),ve(()=>{S?window.scrollTo(S.scrollX,S.scrollY):window.scrollTo(0,0)}));let D=null,N=null;Ve.subscribe(async u=>{D=u;let c=0;for(;c<i.length;){let h=i[c].match(u.location);if(!h){c++;continue}let j={route:i[c].path,location:u.location,querystring:u.querystring,userData:i[c].userData};if(!await i[c].checkConditions(j)){t(0,r=null),N=null,A("conditionsFailed",j);return}A("routeLoading",Object.assign({},j));let _=i[c].component;if(N!=_){_.loading?(t(0,r=_.loading),N=_,t(1,f=_.loadingParams),t(2,d={}),A("routeLoaded",Object.assign({},j,{component:r,name:r.name}))):(t(0,r=null),N=null);let $=await _();if(u!=D)return;t(0,r=$&&$.default||$),N=_}h&&typeof h=="object"&&Object.keys(h).length?t(1,f=h):t(1,f=null),t(2,d=i[c].props),A("routeLoaded",Object.assign({},j,{component:r,name:r.name}));return}t(0,r=null),N=null});function T(u){K(o,u)}function O(u){K(o,u)}return o.$$set=u=>{"routes"in u&&t(3,n=u.routes),"prefix"in u&&t(4,s=u.prefix),"restoreScrollState"in u&&t(5,a=u.restoreScrollState)},o.$$.update=()=>{o.$$.dirty&32&&(history.scrollRestoration=a?"manual":"auto")},[r,f,d,n,s,a,T,O]}var te=class extends k{constructor(e){super();x(this,e,Ne,Se,v,{routes:3,prefix:4,restoreScrollState:5})}},ne=te;function Te(o){let e,t;return{c(){e=m("img"),e.src!==(t="pigeon.svg")&&p(e,"src",t),p(e,"alt","pigeon"),p(e,"width",o[1]),p(e,"class","svelte-1hh8uyz"),oe(e,"pigeon-icon-left",o[0]==="left")},m(n,s){g(n,e,s)},p(n,[s]){s&2&&p(e,"width",n[1]),s&1&&oe(e,"pigeon-icon-left",n[0]==="left")},i:y,o:y,d(n){n&&w(e)}}}function Ae(o,e,t){let{facing:n="right"}=e,{width:s=48}=e;return o.$$set=a=>{"facing"in a&&t(0,n=a.facing),"width"in a&&t(1,s=a.width)},[n,s]}var se=class extends k{constructor(e){super();x(this,e,Ae,Te,v,{facing:0,width:1})}},ie=se;function $e(o){let e,t,n,s,a;return n=new ie({}),{c(){e=m("nav"),t=m("a"),L(n.$$.fragment),s=R(`
    pigeon`),p(t,"href","#/"),p(t,"class","svelte-1exqj4g"),p(e,"class","svelte-1exqj4g")},m(l,i){g(l,e,i),b(e,t),I(n,t,null),b(t,s),a=!0},p:y,i(l){a||(C(n.$$.fragment,l),a=!0)},o(l){E(n.$$.fragment,l),a=!1},d(l){l&&w(e),q(n)}}}var re=class extends k{constructor(e){super();x(this,e,null,$e,v,{})}},ae=re;function Le(o){let e,t;return{c(){e=m("div"),e.innerHTML='<div class="spinner svelte-1ilml2y"><div class="spinner-animation svelte-1ilml2y"><svg class="spinner-svg svelte-1ilml2y" width="50" height="50" stroke-width="8.00" viewBox="1.00 1.00 98.00 98.00"><path class="spinner-track svelte-1ilml2y" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90"></path><path class="spinner-head svelte-1ilml2y" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90" pathLength="280" stroke-dasharray="280 280" stroke-dashoffset="210"></path></svg></div></div>',p(e,"class","loading-wrapper svelte-1ilml2y")},m(n,s){g(n,e,s)},p:y,i(n){t||M(()=>{t=B(e,U,{duration:100}),t.start()})},o:y,d(n){n&&w(e)}}}var le=class extends k{constructor(e){super();x(this,e,null,Le,v,{})}},H=le;function qe(o){let e,t,n,s,a,l,i,r,f,d,Y,A,S,D,N;return{c(){e=m("div"),t=m("h1"),t.textContent="svelte template",n=X(),s=m("button"),s.textContent="button",a=X(),l=m("p"),i=R("button clicks: "),r=R(o[1]),f=X(),d=m("p"),Y=R("elapsed seconds: "),A=R(o[0]),p(s,"class","svelte-1kjnxzr"),p(e,"class","svelte-1kjnxzr")},m(T,O){g(T,e,O),b(e,t),b(e,n),b(e,s),b(e,a),b(e,l),b(l,i),b(l,r),b(e,f),b(e,d),b(d,Y),b(d,A),D||(N=Ie(s,"click",o[2]),D=!0)},p(T,[O]){O&2&&ce(r,T[1]),O&1&&ce(A,T[0])},i(T){S||M(()=>{S=B(e,U,{duration:100}),S.start()})},o:y,d(T){T&&w(e),D=!1,N()}}}function De(o,e,t){let n=0,s=0;return setInterval(()=>t(0,n++,n),1e3),[n,s,()=>t(1,s++,s)]}var ue=class extends k{constructor(e){super();x(this,e,De,qe,v,{})}},fe=ue;function Oe(o){let e,t;return{c(){e=m("div"),e.innerHTML=`<section class="svelte-1g9hwfx"><h2>Not Found</h2> 
    <h3>Nice job, <a href="#/">return to home</a>?</h3></section>`,p(e,"class","svelte-1g9hwfx")},m(n,s){g(n,e,s)},p:y,i(n){t||M(()=>{t=B(e,U,{duration:100}),t.start()})},o:y,d(n){n&&w(e)}}}function Pe(o,e,t){let{params:n}=e;return o.$$set=s=>{"params"in s&&t(0,n=s.params)},[n]}var he=class extends k{constructor(e){super();x(this,e,Pe,Oe,v,{params:0})}},de=he;var pe=class{constructor({id:e,author:t,content:n,media:s,likes:a,parent:l}){this.hydrated=!1,this.id=e,this.likes=a,this.authorName=t,this.content=n,this.media=s,this.parentId=l}hydrate({users:e,posts:t}){this.author=e.find(n=>n.username===this.authorName),this.comments=t.filter(n=>n.parentId===this.id),this.parentId&&(this.parent=t.find(n=>n.id===this.parentId)),this.hydrated=!0}},me=class{constructor({username:e,displayName:t,followers:n,following:s,profileImage:a,bio:l,bannerImage:i}){this.hydrated=!1,this.username=e,this.displayName=t,this._followers=n,this._following=s,this.bio=l,this.profileImage=a,this.bannerImage=i}hydrate({users:e,posts:t}){let n=e.map(s=>({[s.username]:s})).reduce((s,a)=>({...s,...a}),{});this.followers=this._followers.map(s=>n[s]),this.following=this._following.map(s=>n[s]),this.posts=t.filter(s=>s.authorName===this.username),this.hydrated=!0}},Q=class{constructor(e){this.data=e,this.hydrated=!1,this.users=[],this.posts=[],e.users.forEach(t=>{this.users.push(new me({username:t.username,displayName:t.displayName,followers:e.follows.filter(n=>n.follows===t.username).map(n=>n.user),following:e.follows.filter(n=>n.user===t.username).map(n=>n.follows),bio:t.bio,profileImage:t.profileImage,bannerImage:t.bannerImage}))}),e.posts.forEach(t=>{this.posts.push(new pe({parent:t.parent,id:t.id,likes:t.likes,author:t.author,content:t.content,media:t.media}))}),this._userObj=this.users.map(t=>({[t.username.toLowerCase()]:t})).reduce((t,n)=>({...t,...n}),{}),this._postObj=this.posts.map(t=>({[t.id]:t})).reduce((t,n)=>({...t,...n}),{})}getUser(e){return e?this._userObj[e.toLowerCase()]:void 0}getPost(e){return e?this._postObj[e]:void 0}hydrate(){this.users.map(e=>e.hydrate(this)),this.posts.map(e=>e.hydrate(this)),this.hydrated=!0}},Re=[{username:"beowulf",displayName:"Beowulf \u2694\uFE0F",bio:"the best hero around",profileImage:{type:"image",src:"profile/beowulf.png"}},{username:"hrothgar",displayName:"Hrothgar",bio:"king of somewhere idk"},{username:"Technothepig",displayName:"Technoblade \u{1F437}",bio:"the second worst thing to ever happen to those orphans",profileImage:{type:"image",src:"profile/technothepig.jpg"},bannerImage:{type:"image",src:"banner/technothepig.jpeg"}}],Me=[{id:"0oprpixLbaJDIglddIizv",author:"beowulf",content:"Test post",media:[{type:"image",src:"svelte.png",caption:"svelte logo"}],likes:50},{parent:"0oprpixLbaJDIglddIizv",id:"RB61Ba2ehug79hu6nzFV_",author:"hrothgar",content:"Test comment",media:[],likes:25},{parent:"RB61Ba2ehug79hu6nzFV_",id:"UhhGmvbhcxjYmt0n5BQno",author:"beowulf",content:"Test reply",media:[{type:"image",src:"svelte.png",caption:"svelte logo"}],likes:5},{parent:"UhhGmvbhcxjYmt0n5BQno",id:"SEq7GvVUzqDK5fUKvuRnI",author:"hrothgar",content:"Test reply to reply",media:[],likes:0},{id:"lS3DxdxnBZO3xLJ7tMeQ6",author:"hrothgar",content:"Test post",media:[],likes:50},{parent:"lS3DxdxnBZO3xLJ7tMeQ6",id:"PRGmwbcp7qxH84M4QrUWu",author:"beowulf",content:"Test comment",media:[{type:"image",src:"svelte.png",caption:"svelte logo"}],likes:25},{parent:"PRGmwbcp7qxH84M4QrUWu",id:"xzR7drjMu1GuSiVvr8vqQ",author:"hrothgar",content:"Test reply",media:[],likes:5},{parent:"xzR7drjMu1GuSiVvr8vqQ",id:"6LyThWc_1rBnP1mDHcda5",author:"beowulf",content:"Test reply to reply",media:[{type:"image",src:"svelte.png",caption:"svelte logo"}],likes:0},{parent:"lS3DxdxnBZO3xLJ7tMeQ6",id:"W27YRusicYz7dSKmn0u6k",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"W27YRusicYz7dSKmn0u6k",id:"SCu5tGrhomM-HMJ40Y-Na",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"SCu5tGrhomM-HMJ40Y-Na",id:"48sBig6Uu45Q5D50BBX_-",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"48sBig6Uu45Q5D50BBX_-",id:"NX0mS-mlaELd7p9CPuAOe",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"NX0mS-mlaELd7p9CPuAOe",id:"T00df7nTkdxHUWXcu_NN8",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"T00df7nTkdxHUWXcu_NN8",id:"ouLJXAPSUbhH3_o7nsVF8",author:"Technothepig",content:"nice",media:[],likes:-1500},{parent:"ouLJXAPSUbhH3_o7nsVF8",id:"rGX0lKfNh_7QCyKpSjiWN",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"rGX0lKfNh_7QCyKpSjiWN",id:"nHLR_qgUBD23ecUWvtW6-",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"nHLR_qgUBD23ecUWvtW6-",id:"huxUvIqunBoA15Hs7580s",author:"Technothepig",content:"nice",media:[],likes:1e3},{id:"E-0rhcFi8dHsaZYMVBnow",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"E-0rhcFi8dHsaZYMVBnow",id:"N4a50dVM3MIDqAtCrY0Gk",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"N4a50dVM3MIDqAtCrY0Gk",id:"UnkdmJgC94a47ZFAhXQAr",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"UnkdmJgC94a47ZFAhXQAr",id:"LYZZ0I1yeK_lt-RPXByjA",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"LYZZ0I1yeK_lt-RPXByjA",id:"72NRbr8z11gcAK16CxMEK",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"72NRbr8z11gcAK16CxMEK",id:"bkEiQ1P8gs4E4eYZyxQDp",author:"Technothepig",content:"nice",media:[],likes:-1500},{parent:"bkEiQ1P8gs4E4eYZyxQDp",id:"kV_SgJv_oJ56gisKscxgC",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"kV_SgJv_oJ56gisKscxgC",id:"lXWgDxPREL8J0hdUTzvE2",author:"Technothepig",content:"nice",media:[],likes:1e3},{parent:"lXWgDxPREL8J0hdUTzvE2",id:"N9MXTgw3AjOasq2VuUDgx",author:"Technothepig",content:"nice",media:[],likes:1e3}],Be=[{user:"hrothgar",follows:"beowulf"},{user:"hrothgar",follows:"Technothepig"},{user:"beowulf",follows:"Technothepig"}],_e={users:Re,posts:Me,follows:Be};function Ue(o){let e,t,n,s,a;return e=new ae({}),s=new ne({props:{routes:o[0]}}),{c(){L(e.$$.fragment),t=X(),n=m("main"),L(s.$$.fragment)},m(l,i){I(e,l,i),g(l,t,i),g(l,n,i),I(s,n,null),a=!0},p:y,i(l){a||(C(e.$$.fragment,l),C(s.$$.fragment,l),a=!0)},o(l){E(e.$$.fragment,l),E(s.$$.fragment,l),a=!1},d(l){q(e,l),l&&w(t),l&&w(n),q(s)}}}function He(o){let e=new Q(_e);return e.hydrate(),[{"/":fe,"/user/:username":P({asyncComponent:()=>import("/pigeon-project/_dist_/pages/User.js"),loadingComponent:H,props:{hydrator:e}}),"/user/:username/followers":P({asyncComponent:()=>import("/pigeon-project/_dist_/pages/Followers.js"),loadingComponent:H,props:{hydrator:e}}),"/user/:username/following":P({asyncComponent:()=>import("/pigeon-project/_dist_/pages/Following.js"),loadingComponent:H,props:{hydrator:e}}),"/post/:id":P({asyncComponent:()=>import("/pigeon-project/_dist_/pages/Post.js"),loadingComponent:H,props:{hydrator:e}}),"*":de}]}var ge=class extends k{constructor(e){super();x(this,e,He,Ue,v,{})}},we=ge;var z={};z.env=F;var ye=new we({target:document.body}),Xe=ye;z.hot&&(z.hot.accept(),z.hot.dispose(function(){ye.$destroy()}));export{Xe as default};
