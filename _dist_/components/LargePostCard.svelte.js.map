{"version":3,"names":[],"sources":["LargePostCard.svelte"],"sourcesContent":["<script lang=\"ts\">import { format } from 'date-fns';\n;\nimport { push } from 'svelte-spa-router';\nimport { assert, formatUserContent } from '../util';\n;\nexport let post;\nexport let interactive = undefined;\nexport let type = undefined;\nexport let showParent = true;\nconst headerInteractive = (node, user, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/user/${user.username}`));\n    }\n};\nconst fullInteractive = (node, post, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/post/${post.id}`));\n    }\n};\nconst countComments = (post) => {\n    var _a, _b;\n    let num = 0;\n    num += post.comments\n        ? post.comments.length + ((_b = (_a = post.comments) === null || _a === void 0 ? void 0 : _a.map(countComments).reduce((a, b) => a + b, 0)) !== null && _b !== void 0 ? _b : 0)\n        : 0;\n    return num;\n};\n$: commentCount = countComments(post);\n//# sourceMappingURL=LargePostCard.svelte.js.map</script>\n\n<style lang=\"scss\">.large-post-card {\n  padding: 0.6rem;\n  border: 0.5px solid #cbd5e1;\n  background-color: #fdfdfd;\n  transition: background-color 75ms linear;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n.large-post-card .gray {\n  color: #4b5563;\n}\n.large-post-card.linked-top {\n  border-top-width: 0;\n}\n.large-post-card header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.large-post-card header.interactive img:hover {\n  cursor: pointer;\n  background-color: #0000000f;\n  filter: brightness(90%);\n}\n.large-post-card header aside:first-of-type {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin-right: 0.5rem;\n}\n.large-post-card header aside:first-of-type img {\n  width: 3rem;\n  height: 3rem;\n  object-fit: cover;\n  border: 1px solid #cbd5e1;\n  border-radius: 50%;\n  transition: filter 75ms linear, background-color 75ms linear;\n  z-index: 1;\n}\n.large-post-card header aside:first-of-type .link {\n  position: absolute;\n  left: calc(50% - 1px);\n  width: 2px;\n  z-index: 0;\n  background-color: #cbd5e1;\n}\n.large-post-card header aside:first-of-type .link.link-top {\n  top: -1.75rem;\n  height: 1.75rem;\n}\n.large-post-card header aside:last-of-type {\n  display: flex;\n  flex-direction: column;\n}\n.large-post-card header aside:last-of-type:hover span {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.large-post-card header aside:last-of-type span {\n  display: block;\n}\n.large-post-card header aside:last-of-type span:first-of-type {\n  margin-bottom: 0.25rem;\n}\n.large-post-card :global(.parent.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.large-post-card .body {\n  flex: 1 0;\n  display: flex;\n  flex-direction: column;\n}\n.large-post-card .body .parent {\n  margin: 0.5rem 0 0.375rem;\n  font-size: 0.95rem;\n  width: fit-content;\n  color: #64748b;\n}\n.large-post-card .body .parent strong {\n  font-weight: 600;\n  color: #334155;\n}\n.large-post-card .body .content {\n  margin: 0.5rem 0 0;\n  display: block;\n  font-size: 1.5rem;\n}\n.large-post-card .body .content :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\n.large-post-card .body .content :global(a):hover {\n  color: #1d4ed8;\n}\n.large-post-card .body .media {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 1rem 0 0;\n}\n.large-post-card .body .media .attachment {\n  border-radius: 0.5rem;\n  position: relative;\n  border: 1px solid #cbd5e1;\n}\n.large-post-card .body .media .attachment img {\n  border-radius: 0.5rem;\n  max-width: 100%;\n}\n.large-post-card .body .media .attachment .caption {\n  border-radius: 0 0 0.5rem 0.5rem;\n  color: white;\n  width: 100%;\n  padding: 0.5rem 0.25rem;\n  position: absolute;\n  bottom: 0%;\n  left: 0;\n  background: rgba(71, 85, 105, 0.5);\n  text-align: center;\n}\n.large-post-card .body hr {\n  margin-top: 1rem;\n  border: none;\n  border-bottom: 1px solid #cbd5e1;\n  width: 100%;\n}\n.large-post-card .body .interactions {\n  margin: 0.25rem;\n  display: flex;\n  align-items: center;\n  color: #1e293b;\n}\n.large-post-card .body .interactions > * {\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n}\n.large-post-card .body .interactions > * > :global(*) {\n  margin-right: 0.25rem;\n}</style>\n\n<div\n  class=\"large-post-card\"\n  class:is-reply={showParent && !!post.parent}\n  class:linked-top={type === 'linked-top' || type === 'linked-full'}\n  class:linked-bottom={type === 'linked-bottom' || type === 'linked-full'}\n>\n  <header use:headerInteractive={assert(post.author)}>\n    <aside>\n      {#if type === 'linked-top' || type === 'linked-full'}\n        <div class=\"link link-top\" />\n      {/if}\n      <img src={post.author?.profileImage?.src ?? 'default.png'} alt=\"profile\" />\n    </aside>\n    <aside use:headerInteractive={assert(post.author)}>\n      <span class=\"header\">\n        <b>{post.author?.displayName}</b>\n      </span>\n      <span class=\"gray\">@{post.author?.username}</span>\n    </aside>\n  </header>\n  <div class=\"body\">\n    {#if showParent && post.parent}\n      <span class=\"parent\" use:fullInteractive={assert(post.parent)}>\n        Replying to\n        <strong>@{post.parent.author?.username}</strong>\n      </span>\n    {/if}\n    <span class=\"content\">{@html formatUserContent(post.content)}</span>\n    {#if post.media.length}\n      <div class=\"media\">\n        {#each post.media as media, index}\n          {#if media.type === 'image'}\n            <div class=\"attachment\">\n              <img src={media.src} alt=\"attachment {index}\" />\n              {#if media.caption}\n                <span class=\"caption\">{@html media.caption}</span>\n              {/if}\n            </div>\n          {:else}\n            <span>Unknown media type: {media.type} (src: {media.src})</span>\n          {/if}\n        {/each}\n      </div>\n    {/if}\n    {#if $$slots.default}\n      <div>\n        <hr />\n        <slot />\n      </div>\n    {/if}\n    <hr />\n    <div class=\"interactions\" use:fullInteractive={post}>\n      <span class=\"likes\">\n        <strong>{post.likes.toLocaleString()}</strong>\n        points\n      </span>\n      <span class=\"comments\" use:fullInteractive={post}>\n        <strong>{commentCount.toLocaleString()}</strong>\n        comment{commentCount === 1 ? '' : 's'}\n      </span>\n      <span class=\"timestamp\">\n        <span class=\"gray\">{format(post.timestamp, 'MMM d, yyy')}</span>\n        &nbsp;Â·&nbsp;\n        <span class=\"gray\">{format(post.timestamp, 'h:mm a')}</span>\n      </span>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"}