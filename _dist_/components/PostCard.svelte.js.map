{"version":3,"names":[],"sources":["PostCard.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">export {};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<script lang=\"ts\">import { format } from 'date-fns';\n;\nimport { push } from 'svelte-spa-router';\nimport { assert, formatUserContent } from '../util';\nimport Icon from './Icon.svelte';\nexport let post;\nexport let interactive = undefined;\nexport let type = undefined;\nexport let showParent = true;\nconst headerInteractive = (node, user, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/user/${user.username}`));\n    }\n};\nconst fullInteractive = (node, post, ...rest) => {\n    if (interactive === 'full') {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/post/${post.id}`));\n    }\n};\nconst countComments = (post) => {\n    var _a, _b;\n    let num = 0;\n    num += post.comments\n        ? post.comments.length + ((_b = (_a = post.comments) === null || _a === void 0 ? void 0 : _a.map(countComments).reduce((a, b) => a + b, 0)) !== null && _b !== void 0 ? _b : 0)\n        : 0;\n    return num;\n};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<style lang=\"scss\">:global(.post-card).interactive:hover {\n  background-color: #f6f6f6 !important;\n  cursor: pointer;\n}\n:global(.post-card).interactive:active {\n  background-color: #f0f0f0;\n}\n\n.post-card {\n  padding: 0.6rem;\n  border: 0.5px solid #cbd5e1;\n  background-color: #fdfdfd;\n  transition: background-color 75ms linear;\n  display: flex;\n  position: relative;\n}\n.post-card.linked-top {\n  border-top-width: 0;\n}\n.post-card.linked-bottom {\n  border-bottom-width: 0;\n}\n.post-card.is-reply > .image-col {\n  margin-top: 1.25rem;\n}\n.post-card .image-col {\n  position: relative;\n  width: 3rem;\n  display: flex;\n  flex-direction: column;\n  margin-right: 0.5rem;\n}\n.post-card .image-col img {\n  width: 3rem;\n  height: 3rem;\n  object-fit: cover;\n  border: 1px solid #cbd5e1;\n  border-radius: 50%;\n  transition: filter 75ms linear, background-color 75ms linear;\n  z-index: 1;\n}\n.post-card .image-col.interactive img:hover {\n  cursor: pointer;\n  background-color: #0000000f;\n  filter: brightness(90%);\n}\n.post-card .image-col .link {\n  position: absolute;\n  left: calc(50% - 1px);\n  width: 2px;\n  z-index: 0;\n  background-color: #cbd5e1;\n}\n.post-card .image-col .link.link-top {\n  top: -1.75rem;\n  height: 1.75rem;\n}\n.post-card .image-col .link.link-bottom {\n  top: 3rem;\n  bottom: -0.5rem;\n}\n.post-card > * {\n  z-index: 1;\n}\n.post-card .body {\n  position: relative;\n}\n.post-card .body > * {\n  z-index: 1;\n}\n.post-card .post-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.post-card .parent {\n  margin-bottom: 0.375rem;\n  font-size: 0.75rem;\n  width: fit-content;\n  color: #64748b;\n}\n.post-card .parent strong {\n  font-weight: 600;\n  color: #334155;\n}\n.post-card :global(.parent.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .gray {\n  color: #4b5563;\n}\n.post-card .header {\n  display: block;\n  width: fit-content;\n  margin-bottom: 2px;\n  display: flex;\n  align-items: center;\n}\n.post-card :global(.username.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .body {\n  flex: 1 0;\n  display: flex;\n  flex-direction: column;\n}\n.post-card .body .content {\n  margin-bottom: 0.25rem;\n  display: block;\n}\n.post-card .body .content :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\n.post-card .body .content :global(a):hover {\n  color: #1d4ed8;\n}\n.post-card .body .content :global(&.interactive):hover {\n  cursor: pointer;\n}\n.post-card .body .media-preview {\n  margin-bottom: 0.5rem;\n  font-size: 0.95rem;\n  display: block;\n}\n.post-card .body .interactions {\n  display: flex;\n  align-items: center;\n  color: #64748b;\n}\n.post-card .body .interactions > * {\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n}\n.post-card .body .interactions > * > :global(*) {\n  margin-right: 0.5rem;\n}</style>\n\n<div\n  class=\"post-card\"\n  class:interactive={interactive === 'full'}\n  class:is-reply={showParent && !!post.parent}\n  class:linked-top={type === 'linked-top' || type === 'linked-full'}\n  class:linked-bottom={type === 'linked-bottom' || type === 'linked-full'}\n>\n  <div class=\"post-background\" use:fullInteractive={post} />\n  <div class=\"image-col\" use:headerInteractive={assert(post.author)}>\n    {#if type === 'linked-top' || type === 'linked-full'}\n      <div class=\"link link-top\" />\n    {/if}\n    <img src={post.author?.profileImage?.src ?? 'default.png'} alt=\"profile\" />\n    {#if type === 'linked-bottom' || type === 'linked-full'}\n      <div class=\"link link-bottom\" />\n    {/if}\n  </div>\n  <div class=\"body\">\n    <div class=\"post-background\" use:fullInteractive={post} />\n    {#if showParent && post.parent}\n      <span class=\"parent\" use:fullInteractive={assert(post.parent)}>\n        Replying to\n        <strong>@{post.parent.author?.username}</strong>\n      </span>\n    {/if}\n    <span class=\"header\">\n      <div class=\"username\" use:headerInteractive={assert(post.author)}>\n        <b>{post.author?.displayName}</b>\n        <span class=\"gray\">@{post.author?.username}</span>\n      </div>\n      &nbsp;Â·&nbsp;\n      <span class=\"gray\">{format(post.timestamp, 'MMM d, yyy')}</span>\n    </span>\n    <span class=\"content\" use:fullInteractive={post}>{@html formatUserContent(post.content)}</span>\n    {#if post.media.length}\n      <span class=\"media-preview gray\">\n        <i>{post.media.length} attachment{post.media.length === 1 ? '' : 's'}</i>\n      </span>\n    {/if}\n    {#if $$slots.default}\n      <div>\n        <hr />\n        <slot />\n      </div>\n    {/if}\n    <div class=\"interactions\" use:fullInteractive={post}>\n      <span class=\"likes\">\n        <Icon icon=\"arrow-up\" />\n        <span>{post.likes.toLocaleString()}</span>\n        <Icon icon=\"arrow-down\" />\n      </span>\n      <span class=\"comments\" use:fullInteractive={post}>\n        <Icon icon=\"message-square\" />\n        <span>{countComments(post).toLocaleString()}</span>\n      </span>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"}