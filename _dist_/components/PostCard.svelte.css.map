{"version":3,"file":"PostCard.svelte","sources":["PostCard.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">export {};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<script lang=\"ts\">import { format } from 'date-fns';\n;\nimport { push } from 'svelte-spa-router';\nimport { assert, formatUserContent } from '../util';\nimport Icon from './Icon.svelte';\nexport let post;\nexport let interactive = undefined;\nexport let type = undefined;\nexport let showParent = true;\nconst headerInteractive = (node, user, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/user/${user.username}`));\n    }\n};\nconst fullInteractive = (node, post, ...rest) => {\n    if (interactive === 'full') {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/post/${post.id}`));\n    }\n};\nconst countComments = (post) => {\n    var _a, _b;\n    let num = 0;\n    num += post.comments\n        ? post.comments.length + ((_b = (_a = post.comments) === null || _a === void 0 ? void 0 : _a.map(countComments).reduce((a, b) => a + b, 0)) !== null && _b !== void 0 ? _b : 0)\n        : 0;\n    return num;\n};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<style lang=\"scss\">:global(.post-card).interactive:hover {\n  background-color: #f6f6f6 !important;\n  cursor: pointer;\n}\n:global(.post-card).interactive:active {\n  background-color: #f0f0f0;\n}\n\n.post-card {\n  padding: 0.6rem;\n  border: 0.5px solid #cbd5e1;\n  background-color: #fdfdfd;\n  transition: background-color 75ms linear;\n  display: flex;\n  position: relative;\n}\n.post-card.linked-top {\n  border-top-width: 0;\n}\n.post-card.linked-bottom {\n  border-bottom-width: 0;\n}\n.post-card.is-reply > .image-col {\n  margin-top: 1.25rem;\n}\n.post-card .image-col {\n  position: relative;\n  width: 3rem;\n  display: flex;\n  flex-direction: column;\n  margin-right: 0.5rem;\n}\n.post-card .image-col img {\n  width: 3rem;\n  height: 3rem;\n  object-fit: cover;\n  border: 1px solid #cbd5e1;\n  border-radius: 50%;\n  transition: filter 75ms linear, background-color 75ms linear;\n  z-index: 1;\n}\n.post-card .image-col.interactive img:hover {\n  cursor: pointer;\n  background-color: #0000000f;\n  filter: brightness(90%);\n}\n.post-card .image-col .link {\n  position: absolute;\n  left: calc(50% - 1px);\n  width: 2px;\n  z-index: 0;\n  background-color: #cbd5e1;\n}\n.post-card .image-col .link.link-top {\n  top: -1.75rem;\n  height: 1.75rem;\n}\n.post-card .image-col .link.link-bottom {\n  top: 3rem;\n  bottom: -0.5rem;\n}\n.post-card > * {\n  z-index: 1;\n}\n.post-card .body {\n  position: relative;\n}\n.post-card .body > * {\n  z-index: 1;\n}\n.post-card .post-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.post-card .parent {\n  margin-bottom: 0.375rem;\n  font-size: 0.75rem;\n  width: fit-content;\n  color: #64748b;\n}\n.post-card .parent strong {\n  font-weight: 600;\n  color: #334155;\n}\n.post-card :global(.parent.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .gray {\n  color: #4b5563;\n}\n.post-card .header {\n  display: block;\n  width: fit-content;\n  margin-bottom: 2px;\n  display: flex;\n  align-items: center;\n}\n.post-card :global(.username.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .body {\n  flex: 1 0;\n  display: flex;\n  flex-direction: column;\n}\n.post-card .body .content {\n  margin-bottom: 0.25rem;\n  display: block;\n}\n.post-card .body .content :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\n.post-card .body .content :global(a):hover {\n  color: #1d4ed8;\n}\n.post-card .body .content :global(&.interactive):hover {\n  cursor: pointer;\n}\n.post-card .body .media-preview {\n  margin-bottom: 0.5rem;\n  font-size: 0.95rem;\n  display: block;\n}\n.post-card .body .interactions {\n  display: flex;\n  align-items: center;\n  color: #64748b;\n}\n.post-card .body .interactions > * {\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n}\n.post-card .body .interactions > * > :global(*) {\n  margin-right: 0.5rem;\n}</style>\n\n<div\n  class=\"post-card\"\n  class:interactive={interactive === 'full'}\n  class:is-reply={showParent && !!post.parent}\n  class:linked-top={type === 'linked-top' || type === 'linked-full'}\n  class:linked-bottom={type === 'linked-bottom' || type === 'linked-full'}\n>\n  <div class=\"post-background\" use:fullInteractive={post} />\n  <div class=\"image-col\" use:headerInteractive={assert(post.author)}>\n    {#if type === 'linked-top' || type === 'linked-full'}\n      <div class=\"link link-top\" />\n    {/if}\n    <img src={post.author?.profileImage?.src ?? 'default.png'} alt=\"profile\" />\n    {#if type === 'linked-bottom' || type === 'linked-full'}\n      <div class=\"link link-bottom\" />\n    {/if}\n  </div>\n  <div class=\"body\">\n    <div class=\"post-background\" use:fullInteractive={post} />\n    {#if showParent && post.parent}\n      <span class=\"parent\" use:fullInteractive={assert(post.parent)}>\n        Replying to\n        <strong>@{post.parent.author?.username}</strong>\n      </span>\n    {/if}\n    <span class=\"header\">\n      <div class=\"username\" use:headerInteractive={assert(post.author)}>\n        <b>{post.author?.displayName}</b>\n        <span class=\"gray\">@{post.author?.username}</span>\n      </div>\n      &nbsp;Â·&nbsp;\n      <span class=\"gray\">{format(post.timestamp, 'MMM d, yyy')}</span>\n    </span>\n    <span class=\"content\" use:fullInteractive={post}>{@html formatUserContent(post.content)}</span>\n    {#if post.media.length}\n      <span class=\"media-preview gray\">\n        <i>{post.media.length} attachment{post.media.length === 1 ? '' : 's'}</i>\n      </span>\n    {/if}\n    {#if $$slots.default}\n      <div>\n        <hr />\n        <slot />\n      </div>\n    {/if}\n    <div class=\"interactions\" use:fullInteractive={post}>\n      <span class=\"likes\">\n        <Icon icon=\"arrow-up\" />\n        <span>{post.likes.toLocaleString()}</span>\n        <Icon icon=\"arrow-down\" />\n      </span>\n      <span class=\"comments\" use:fullInteractive={post}>\n        <Icon icon=\"message-square\" />\n        <span>{countComments(post).toLocaleString()}</span>\n      </span>\n    </div>\n  </div>\n</div>\n"],"names":[],"mappings":"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"}