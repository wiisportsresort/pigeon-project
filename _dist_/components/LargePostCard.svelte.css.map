{"version":3,"file":"LargePostCard.svelte","sources":["LargePostCard.svelte"],"sourcesContent":["<script lang=\"ts\">import { format } from 'date-fns';\n;\nimport { push } from 'svelte-spa-router';\nimport { assert, formatUserContent } from '../util';\n;\nexport let post;\nexport let interactive = undefined;\nexport let type = undefined;\nexport let showParent = true;\nconst headerInteractive = (node, user, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/user/${user.username}`));\n    }\n};\nconst fullInteractive = (node, post, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/post/${post.id}`));\n    }\n};\nconst countComments = (post) => {\n    var _a, _b;\n    let num = 0;\n    num += post.comments\n        ? post.comments.length + ((_b = (_a = post.comments) === null || _a === void 0 ? void 0 : _a.map(countComments).reduce((a, b) => a + b, 0)) !== null && _b !== void 0 ? _b : 0)\n        : 0;\n    return num;\n};\n$: commentCount = countComments(post);\n//# sourceMappingURL=LargePostCard.svelte.js.map</script>\n\n<style lang=\"scss\">.large-post-card {\n  padding: 0.6rem;\n  border: 0.5px solid #cbd5e1;\n  background-color: #fdfdfd;\n  transition: background-color 75ms linear;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n.large-post-card .gray {\n  color: #4b5563;\n}\n.large-post-card.linked-top {\n  border-top-width: 0;\n}\n.large-post-card header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.large-post-card header.interactive img:hover {\n  cursor: pointer;\n  background-color: #0000000f;\n  filter: brightness(90%);\n}\n.large-post-card header aside:first-of-type {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin-right: 0.5rem;\n}\n.large-post-card header aside:first-of-type img {\n  width: 3rem;\n  height: 3rem;\n  object-fit: cover;\n  border: 1px solid #cbd5e1;\n  border-radius: 50%;\n  transition: filter 75ms linear, background-color 75ms linear;\n  z-index: 1;\n}\n.large-post-card header aside:first-of-type .link {\n  position: absolute;\n  left: calc(50% - 1px);\n  width: 2px;\n  z-index: 0;\n  background-color: #cbd5e1;\n}\n.large-post-card header aside:first-of-type .link.link-top {\n  top: -1.75rem;\n  height: 1.75rem;\n}\n.large-post-card header aside:last-of-type {\n  display: flex;\n  flex-direction: column;\n}\n.large-post-card header aside:last-of-type:hover span {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.large-post-card header aside:last-of-type span {\n  display: block;\n}\n.large-post-card header aside:last-of-type span:first-of-type {\n  margin-bottom: 0.25rem;\n}\n.large-post-card :global(.parent.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.large-post-card .body {\n  flex: 1 0;\n  display: flex;\n  flex-direction: column;\n}\n.large-post-card .body .parent {\n  margin: 0.5rem 0 0.375rem;\n  font-size: 0.95rem;\n  width: fit-content;\n  color: #64748b;\n}\n.large-post-card .body .parent strong {\n  font-weight: 600;\n  color: #334155;\n}\n.large-post-card .body .content {\n  margin: 0.5rem 0 0;\n  display: block;\n  font-size: 1.5rem;\n}\n.large-post-card .body .content :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\n.large-post-card .body .content :global(a):hover {\n  color: #1d4ed8;\n}\n.large-post-card .body .media {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 1rem 0 0;\n}\n.large-post-card .body .media .attachment {\n  border-radius: 0.5rem;\n  position: relative;\n  border: 1px solid #cbd5e1;\n}\n.large-post-card .body .media .attachment img {\n  border-radius: 0.5rem;\n  max-width: 100%;\n}\n.large-post-card .body .media .attachment .caption {\n  border-radius: 0 0 0.5rem 0.5rem;\n  color: white;\n  width: 100%;\n  padding: 0.5rem 0.25rem;\n  position: absolute;\n  bottom: 0%;\n  left: 0;\n  background: rgba(71, 85, 105, 0.5);\n  text-align: center;\n}\n.large-post-card .body hr {\n  margin-top: 1rem;\n  border: none;\n  border-bottom: 1px solid #cbd5e1;\n  width: 100%;\n}\n.large-post-card .body .interactions {\n  margin: 0.25rem;\n  display: flex;\n  align-items: center;\n  color: #1e293b;\n}\n.large-post-card .body .interactions > * {\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n}\n.large-post-card .body .interactions > * > :global(*) {\n  margin-right: 0.25rem;\n}</style>\n\n<div\n  class=\"large-post-card\"\n  class:is-reply={showParent && !!post.parent}\n  class:linked-top={type === 'linked-top' || type === 'linked-full'}\n  class:linked-bottom={type === 'linked-bottom' || type === 'linked-full'}\n>\n  <header use:headerInteractive={assert(post.author)}>\n    <aside>\n      {#if type === 'linked-top' || type === 'linked-full'}\n        <div class=\"link link-top\" />\n      {/if}\n      <img src={post.author?.profileImage?.src ?? 'default.png'} alt=\"profile\" />\n    </aside>\n    <aside use:headerInteractive={assert(post.author)}>\n      <span class=\"header\">\n        <b>{post.author?.displayName}</b>\n      </span>\n      <span class=\"gray\">@{post.author?.username}</span>\n    </aside>\n  </header>\n  <div class=\"body\">\n    {#if showParent && post.parent}\n      <span class=\"parent\" use:fullInteractive={assert(post.parent)}>\n        Replying to\n        <strong>@{post.parent.author?.username}</strong>\n      </span>\n    {/if}\n    <span class=\"content\">{@html formatUserContent(post.content)}</span>\n    {#if post.media.length}\n      <div class=\"media\">\n        {#each post.media as media, index}\n          {#if media.type === 'image'}\n            <div class=\"attachment\">\n              <img src={media.src} alt=\"attachment {index}\" />\n              {#if media.caption}\n                <span class=\"caption\">{@html media.caption}</span>\n              {/if}\n            </div>\n          {:else}\n            <span>Unknown media type: {media.type} (src: {media.src})</span>\n          {/if}\n        {/each}\n      </div>\n    {/if}\n    {#if $$slots.default}\n      <div>\n        <hr />\n        <slot />\n      </div>\n    {/if}\n    <hr />\n    <div class=\"interactions\" use:fullInteractive={post}>\n      <span class=\"likes\">\n        <strong>{post.likes.toLocaleString()}</strong>\n        points\n      </span>\n      <span class=\"comments\" use:fullInteractive={post}>\n        <strong>{commentCount.toLocaleString()}</strong>\n        comment{commentCount === 1 ? '' : 's'}\n      </span>\n      <span class=\"timestamp\">\n        <span class=\"gray\">{format(post.timestamp, 'MMM d, yyy')}</span>\n        &nbsp;Â·&nbsp;\n        <span class=\"gray\">{format(post.timestamp, 'h:mm a')}</span>\n      </span>\n    </div>\n  </div>\n</div>\n"],"names":[],"mappings":"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"}