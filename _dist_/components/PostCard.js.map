{"version":3,"names":[],"sources":["PostCard.svelte"],"sourcesContent":["<script context=\"module\" lang=\"ts\">export {};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<script lang=\"ts\">;\nimport { push } from 'svelte-spa-router';\nimport { assert } from '../util';\nimport Icon from './Icon.svelte';\nexport let post;\nexport let interactive = undefined;\nexport let type = undefined;\nconst headerInteractive = (node, user, ...rest) => {\n    if (!!interactive) {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/user/${user.username}`));\n    }\n};\nconst fullInteractive = (node, post, ...rest) => {\n    if (interactive === 'full') {\n        node.classList.add('interactive');\n        node.addEventListener('click', () => push(`#/post/${post.id}`));\n    }\n};\nconst countComments = (post) => {\n    var _a, _b;\n    let num = 0;\n    num += post.comments\n        ? post.comments.length + ((_b = (_a = post.comments) === null || _a === void 0 ? void 0 : _a.map(countComments).reduce((a, b) => a + b, 0)) !== null && _b !== void 0 ? _b : 0)\n        : 0;\n    return num;\n};\n//# sourceMappingURL=PostCard.svelte.js.map</script>\n\n<style lang=\"scss\">:global(.post-card).interactive:hover {\n  background-color: #f6f6f6 !important;\n  cursor: pointer;\n}\n:global(.post-card).interactive:active {\n  background-color: #f0f0f0;\n}\n\n.post-card {\n  padding: 8px;\n  border: 0.5px solid #cbd5e1;\n  background-color: #fdfdfd;\n  transition: background-color 75ms linear;\n  display: flex;\n  position: relative;\n}\n.post-card.linked-top {\n  border-top-width: 0;\n}\n.post-card.linked-bottom {\n  border-bottom-width: 0;\n}\n.post-card.is-reply > .image-col {\n  margin-top: 20px;\n}\n.post-card .image-col {\n  position: relative;\n  width: 48px;\n  display: flex;\n  flex-direction: column;\n  margin-right: 8px;\n}\n.post-card .image-col img {\n  width: 48px;\n  height: 48px;\n  object-fit: cover;\n  border: 1px solid #cbd5e1;\n  border-radius: 50%;\n  transition: filter 75ms linear, background-color 75ms linear;\n  z-index: 1;\n}\n.post-card .image-col.interactive img:hover {\n  cursor: pointer;\n  background-color: #0000000f;\n  filter: brightness(90%);\n}\n.post-card .image-col .link {\n  position: absolute;\n  left: calc(50% - 1px);\n  width: 2px;\n  z-index: 0;\n  background-color: #cbd5e1;\n}\n.post-card .image-col .link.link-top {\n  top: -28px;\n  height: 28px;\n}\n.post-card .image-col .link.link-bottom {\n  top: 48px;\n  bottom: -8px;\n}\n.post-card > * {\n  z-index: 1;\n}\n.post-card .body {\n  position: relative;\n}\n.post-card .body > * {\n  z-index: 1;\n}\n.post-card .post-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 0;\n}\n.post-card .parent {\n  margin-bottom: 6px;\n  font-size: 0.75rem;\n  width: fit-content;\n  color: #64748b;\n}\n.post-card .parent strong {\n  font-weight: 600;\n  color: #334155;\n}\n.post-card :global(.parent.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .gray {\n  color: #4b5563;\n}\n.post-card .header {\n  display: block;\n  width: fit-content;\n  margin-bottom: 2px;\n}\n.post-card :global(.header.interactive):hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.post-card .body {\n  flex: 1 0;\n  display: flex;\n  flex-direction: column;\n}\n.post-card .body .content {\n  margin-bottom: 4px;\n  display: block;\n}\n.post-card .body .content :global(&.interactive):hover {\n  cursor: pointer;\n}\n.post-card .body .interactions {\n  display: flex;\n  align-items: center;\n  color: #64748b;\n}\n.post-card .body .interactions > * {\n  margin-right: 16px;\n  display: flex;\n  align-items: center;\n}\n.post-card .body .interactions > * > :global(*) {\n  margin-right: 4px;\n}\n.post-card .body .interactions .id {\n  font-size: 0.8em;\n  font-family: \"Iosevka Custom Extended\";\n}</style>\n\n<div\n  class=\"post-card\"\n  class:interactive={interactive === 'full'}\n  class:is-reply={!!post.parent}\n  class:linked-top={type === 'linked-top' || type === 'linked-full'}\n  class:linked-bottom={type === 'linked-bottom' || type === 'linked-full'}>\n  <div class=\"post-background\" use:fullInteractive={post} />\n  <div class=\"image-col\" use:headerInteractive={assert(post.author)}>\n    {#if type === 'linked-top' || type === 'linked-full'}\n      <div class=\"link link-top\" />\n    {/if}\n    <img src={post.author?.profileImage?.src ?? 'default.png'} alt=\"profile\" />\n    {#if type === 'linked-bottom' || type === 'linked-full'}\n      <div class=\"link link-bottom\" />\n    {/if}\n  </div>\n  <div class=\"body\">\n    <div class=\"post-background\" use:fullInteractive={post} />\n    {#if post.parent}\n      <span class=\"parent\" use:fullInteractive={assert(post.parent)}>\n        Replying to\n        <strong>@{post.parent.author?.username}</strong>\n      </span>\n    {/if}\n    <span class=\"header\" use:headerInteractive={assert(post.author)}>\n      <b>{post.author?.displayName}</b>\n      <span class=\"gray\">@{post.author?.username}</span>\n    </span>\n    <span class=\"content\" use:fullInteractive={post}>{post.content}</span>\n    {#if $$slots.default}\n      <div>\n        <hr />\n        <slot />\n      </div>\n    {/if}\n    <div class=\"interactions\" use:fullInteractive={post}>\n      <span class=\"likes\">\n        <Icon icon=\"arrow-up\" />\n        <span>{post.likes}</span>\n        <Icon icon=\"arrow-down\" />\n      </span>\n      <span class=\"comments\" use:fullInteractive={post}>\n        <Icon icon=\"message-square\" />\n        <span>{countComments(post)}</span>\n      </span>\n      <span class=\"id\">{post.id}</span>\n    </div>\n  </div>\n</div>\n"],"mappings":"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"}