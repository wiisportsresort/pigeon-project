{"version":3,"file":"User.svelte","sources":["User.svelte"],"sourcesContent":["<script lang=\"ts\">var _a;\n;\nimport qs from 'qs';\nimport { querystring } from 'svelte-spa-router';\nimport { fade } from 'svelte/transition';\nimport PostCard from '../components/PostCard.svelte';\nimport { format } from 'date-fns';\nimport { formatUserContent } from '../util';\nexport let hydrator;\nexport let params = { username: undefined };\n$: user = hydrator.getUser(params.username);\n$: profileImage = (_a = user === null || user === void 0 ? void 0 : user.profileImage) !== null && _a !== void 0 ? _a : { type: 'image', src: 'default.png' };\n$: tab = qs.parse($querystring !== null && $querystring !== void 0 ? $querystring : '').tab;\nconst setDefaultProfileImage = () => (profileImage = { type: 'image', src: 'default.png' });\n//# sourceMappingURL=User.svelte.js.map</script>\n\n<style lang=\"scss\">#user-wrapper {\n  display: flex;\n  max-width: 892px;\n  justify-content: space-between;\n  margin: 0 auto;\n}\n@media screen and (max-width: 760px) {\n  #user-wrapper {\n    flex-direction: column;\n    align-items: center;\n  }\n  #user-wrapper aside {\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n  #user-wrapper aside h1 {\n    margin-top: 0;\n  }\n  #user-wrapper aside #pfp {\n    width: 8rem;\n    height: 8rem;\n  }\n  #user-wrapper aside #aside-content {\n    margin-left: 1rem;\n    max-height: 9.5rem;\n  }\n  #user-wrapper #posts {\n    width: 100%;\n    margin-top: 32px;\n  }\n}\n\n@media screen and (min-width: 760px) {\n  aside {\n    max-width: 260px;\n  }\n}\naside #pfp-wrapper {\n  display: flex;\n  justify-items: center;\n}\naside #pfp-wrapper #pfp {\n  border-radius: 50%;\n  width: 250px;\n  height: 250px;\n  border: 0.25rem solid #cbd5e1;\n  object-fit: cover;\n}\naside h1 {\n  margin-bottom: 0.25rem;\n}\naside #username {\n  font-size: 16px;\n  color: #64748b;\n  margin-bottom: 8px;\n  display: block;\n}\naside #bio {\n  display: block;\n  margin-bottom: 8px;\n}\naside #bio :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\naside #bio :global(a):hover {\n  color: #1d4ed8;\n}\naside #interactions {\n  display: flex;\n}\naside #interactions a {\n  color: #475569;\n  text-decoration: none;\n  margin-right: 6px;\n}\naside #interactions a .number {\n  color: #1e293b;\n}\naside #interactions a:hover {\n  text-decoration: underline;\n}\naside #join-date {\n  display: block;\n  margin-top: 0.5rem;\n  color: #475569;\n}\naside #join-date b {\n  color: #1e293b;\n}\n\n#posts {\n  flex-grow: 1;\n}\n@media screen and (min-width: 760px) {\n  #posts {\n    max-width: 600px;\n  }\n}\n#posts nav {\n  display: flex;\n  height: 40px;\n}\n#posts nav :first-child {\n  border-top-left-radius: 4px;\n}\n#posts nav :last-child {\n  border-top-right-radius: 4px;\n}\n#posts nav .tab-item {\n  flex-grow: 1;\n  text-decoration: none;\n  color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 2px;\n  border-bottom: 2px solid #dbeafe;\n  background-color: #dbeafe;\n  transition: background-color 75ms linear, border-color 75ms linear;\n}\n#posts nav .tab-item:hover {\n  background-color: #c2dcfd;\n  border-color: #c2dcfd;\n}\n#posts nav .tab-item.selected {\n  border-color: #60a5fa;\n  font-weight: 600;\n}</style>\n\n{#key user}\n  <div in:fade={{ duration: 100 }} id=\"user-wrapper\">\n    {#if user}\n      <aside>\n        <div id=\"pfp-wrapper\">\n          <img src={profileImage.src} on:error={setDefaultProfileImage} alt=\"profile\" id=\"pfp\" />\n        </div>\n        <div id=\"aside-content\">\n          <h1>{user.displayName}</h1>\n          <span id=\"username\">@{user.username}</span>\n          <span id=\"bio\">{@html formatUserContent(user.bio)}</span>\n          <div id=\"interactions\">\n            <a href={`#/user/${user.username}/followers`}>\n              <b class=\"number\">{user.followers?.length}</b>\n              Followers\n            </a>\n            <a href={`#/user/${user.username}/following`}>\n              <b class=\"number\">{user.following?.length}</b>\n              Following\n            </a>\n          </div>\n          <span id=\"join-date\">Joined <b>{format(user.joinDate, 'MMMM yyy')}</b></span>\n        </div>\n      </aside>\n      <section id=\"posts\">\n        <nav class=\"tab-list\">\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'posts' || !tab}\n            href={`#/user/${user.username}?tab=posts`}>Posts</a\n          >\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'posts_with_comments'}\n            href={`#/user/${user.username}?tab=posts_with_comments`}>Posts and comments</a\n          >\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'media'}\n            href={`#/user/${user.username}?tab=media`}>Media</a\n          >\n        </nav>\n        {#key tab}\n          <div in:fade={{ duration: 100 }}>\n            {#if user.posts}\n              {#if tab === 'posts' || !tab}\n                {#if user.posts.some(p => !p.parent)}\n                  {#each [...user.posts]\n                    .filter(p => !p.parent)\n                    .sort(\n                      ({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()\n                    ) as post}\n                    <PostCard {post} interactive=\"full\" />\n                  {/each}\n                {:else}\n                  <h3>No posts</h3>\n                {/if}\n              {:else if tab === 'posts_with_comments'}\n                {#each [...user.posts].sort(({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()) as post}\n                  <PostCard {post} interactive=\"full\" />\n                {/each}\n              {:else if tab === 'media'}\n                {#if user.posts.some(p => p.media.length)}\n                  {#each [...user.posts]\n                    .filter(p => p.media.length)\n                    .sort(\n                      ({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()\n                    ) as post}\n                    <PostCard {post} interactive=\"full\" />\n                  {/each}\n                {:else}\n                  <h3>No posts</h3>\n                {/if}\n              {/if}\n            {:else}\n              <h3>No posts</h3>\n            {/if}\n          </div>\n        {/key}\n      </section>\n    {:else}\n      <h3>User not found: @{params.username}</h3>\n    {/if}\n  </div>\n{/key}\n"],"names":[],"mappings":"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"}