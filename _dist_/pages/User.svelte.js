import"./User.svelte.css.proxy.js";import{SvelteComponent as We,add_render_callback as Be,append as u,attr as c,check_outros as M,component_subscribe as Xe,create_component as ie,create_in_transition as Ie,destroy_component as fe,destroy_each as ae,detach as g,element as v,empty as A,group_outros as C,init as Ye,insert as j,listen as Ze,mount_component as ce,noop as N,safe_not_equal as Fe,set_data as S,space as $,text as w,toggle_class as E,transition_in as d,transition_out as b}from"../../_snowpack/pkg/svelte/internal.js";import xe from"../../_snowpack/pkg/qs.js";import{querystring as et}from"../../_snowpack/pkg/svelte-spa-router.js";import{fade as Je}from"../../_snowpack/pkg/svelte/transition.js";import ue from"../components/PostCard.svelte.js";import{format as Se}from"../../_snowpack/pkg/date-fns.js";function ze(i,l,t){const e=i.slice();return e[8]=l[t],e}function Ae(i,l,t){const e=i.slice();return e[8]=l[t],e}function Ee(i,l,t){const e=i.slice();return e[8]=l[t],e}function tt(i){let l,t,e=i[0].username+"",s;return{c(){l=v("h3"),t=w("User not found: @"),s=w(e)},m(a,o){j(a,l,o),u(l,t),u(l,s)},p(a,o){o&1&&e!==(e=a[0].username+"")&&S(s,e)},i:N,o:N,d(a){a&&g(l)}}}function lt(i){var Ce,qe;let l,t,e,s,a,o,n,r=i[1].displayName+"",f,_,m,_e,H=i[1].username+"",ee,pe,G,K=i[1].bio+"",te,me,I,F,L,O=((Ce=i[1].followers)==null?void 0:Ce.length)+"",le,ve,Q,de,J,R,T=((qe=i[1].following)==null?void 0:qe.length)+"",se,he,V,be,z,ke,W,X=Se(i[1].joinDate,"MMMM yyy")+"",oe,re,D,q,P,ge,Y,je,U,we,Z,Ne,B,ye,x,$e,De=i[3],k,ne,Me,y=Le(i);return{c(){l=v("aside"),t=v("div"),e=v("img"),a=$(),o=v("div"),n=v("h1"),f=w(r),_=$(),m=v("span"),_e=w("@"),ee=w(H),pe=$(),G=v("span"),te=w(K),me=$(),I=v("div"),F=v("a"),L=v("b"),le=w(O),ve=w(`
            Followers`),de=$(),J=v("a"),R=v("b"),se=w(T),he=w(`
            Following`),be=$(),z=v("span"),ke=w("Joined "),W=v("b"),oe=w(X),re=$(),D=v("section"),q=v("nav"),P=v("a"),ge=w("Posts"),je=$(),U=v("a"),we=w("Posts and comments"),Ne=$(),B=v("a"),ye=w("Media"),$e=$(),y.c(),e.src!==(s=i[2].src)&&c(e,"src",s),c(e,"alt","profile"),c(e,"id","pfp"),c(e,"class","svelte-1ft6jvt"),c(t,"id","pfp-wrapper"),c(t,"class","svelte-1ft6jvt"),c(n,"class","svelte-1ft6jvt"),c(m,"id","username"),c(m,"class","svelte-1ft6jvt"),c(G,"id","bio"),c(G,"class","svelte-1ft6jvt"),c(L,"class","number svelte-1ft6jvt"),c(F,"href",Q=`#/user/${i[1].username}/followers`),c(F,"class","svelte-1ft6jvt"),c(R,"class","number svelte-1ft6jvt"),c(J,"href",V=`#/user/${i[1].username}/following`),c(J,"class","svelte-1ft6jvt"),c(I,"id","interactions"),c(I,"class","svelte-1ft6jvt"),c(W,"class","svelte-1ft6jvt"),c(z,"id","join-date"),c(z,"class","svelte-1ft6jvt"),c(o,"id","aside-content"),c(o,"class","svelte-1ft6jvt"),c(l,"class","svelte-1ft6jvt"),c(P,"class","tab-item svelte-1ft6jvt"),c(P,"href",Y=`#/user/${i[1].username}?tab=posts`),E(P,"selected",i[3]==="posts"||!i[3]),c(U,"class","tab-item svelte-1ft6jvt"),c(U,"href",Z=`#/user/${i[1].username}?tab=posts_with_comments`),E(U,"selected",i[3]==="posts_with_comments"),c(B,"class","tab-item svelte-1ft6jvt"),c(B,"href",x=`#/user/${i[1].username}?tab=media`),E(B,"selected",i[3]==="media"),c(q,"class","tab-list svelte-1ft6jvt"),c(D,"id","posts"),c(D,"class","svelte-1ft6jvt")},m(p,h){j(p,l,h),u(l,t),u(t,e),u(l,a),u(l,o),u(o,n),u(n,f),u(o,_),u(o,m),u(m,_e),u(m,ee),u(o,pe),u(o,G),u(G,te),u(o,me),u(o,I),u(I,F),u(F,L),u(L,le),u(F,ve),u(I,de),u(I,J),u(J,R),u(R,se),u(J,he),u(o,be),u(o,z),u(z,ke),u(z,W),u(W,oe),j(p,re,h),j(p,D,h),u(D,q),u(q,P),u(P,ge),u(q,je),u(q,U),u(U,we),u(q,Ne),u(q,B),u(B,ye),u(D,$e),y.m(D,null),k=!0,ne||(Me=Ze(e,"error",i[4]),ne=!0)},p(p,h){var Pe,Ue;(!k||h&4&&e.src!==(s=p[2].src))&&c(e,"src",s),(!k||h&2)&&r!==(r=p[1].displayName+"")&&S(f,r),(!k||h&2)&&H!==(H=p[1].username+"")&&S(ee,H),(!k||h&2)&&K!==(K=p[1].bio+"")&&S(te,K),(!k||h&2)&&O!==(O=((Pe=p[1].followers)==null?void 0:Pe.length)+"")&&S(le,O),(!k||h&2&&Q!==(Q=`#/user/${p[1].username}/followers`))&&c(F,"href",Q),(!k||h&2)&&T!==(T=((Ue=p[1].following)==null?void 0:Ue.length)+"")&&S(se,T),(!k||h&2&&V!==(V=`#/user/${p[1].username}/following`))&&c(J,"href",V),(!k||h&2)&&X!==(X=Se(p[1].joinDate,"MMMM yyy")+"")&&S(oe,X),(!k||h&2&&Y!==(Y=`#/user/${p[1].username}?tab=posts`))&&c(P,"href",Y),h&8&&E(P,"selected",p[3]==="posts"||!p[3]),(!k||h&2&&Z!==(Z=`#/user/${p[1].username}?tab=posts_with_comments`))&&c(U,"href",Z),h&8&&E(U,"selected",p[3]==="posts_with_comments"),(!k||h&2&&x!==(x=`#/user/${p[1].username}?tab=media`))&&c(B,"href",x),h&8&&E(B,"selected",p[3]==="media"),h&8&&Fe(De,De=p[3])?(C(),b(y,1,1,N),M(),y=Le(p),y.c(),d(y),y.m(D,null)):y.p(p,h)},i(p){k||(d(y),k=!0)},o(p){b(y),k=!1},d(p){p&&g(l),p&&g(re),p&&g(D),y.d(p),ne=!1,Me()}}}function st(i){let l;return{c(){l=v("h3"),l.textContent="No posts",c(l,"class","svelte-1ft6jvt")},m(t,e){j(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function ot(i){let l,t,e,s;const a=[it,nt,rt],o=[];function n(r,f){return r[3]==="posts"||!r[3]?0:r[3]==="posts_with_comments"?1:r[3]==="media"?2:-1}return~(l=n(i,-1))&&(t=o[l]=a[l](i)),{c(){t&&t.c(),e=A()},m(r,f){~l&&o[l].m(r,f),j(r,e,f),s=!0},p(r,f){let _=l;l=n(r,f),l===_?~l&&o[l].p(r,f):(t&&(C(),b(o[_],1,1,()=>{o[_]=null}),M()),~l?(t=o[l],t?t.p(r,f):(t=o[l]=a[l](r),t.c()),d(t,1),t.m(e.parentNode,e)):t=null)},i(r){s||(d(t),s=!0)},o(r){b(t),s=!1},d(r){~l&&o[l].d(r),r&&g(e)}}}function rt(i){let l,t,e,s,a;const o=[at,ft],n=[];function r(f,_){return _&2&&(l=!!f[1].posts.some(mt)),l?0:1}return t=r(i,-1),e=n[t]=o[t](i),{c(){e.c(),s=A()},m(f,_){n[t].m(f,_),j(f,s,_),a=!0},p(f,_){let m=t;t=r(f,_),t===m?n[t].p(f,_):(C(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(f,_):(e=n[t]=o[t](f),e.c()),d(e,1),e.m(s.parentNode,s))},i(f){a||(d(e),a=!0)},o(f){b(e),a=!1},d(f){n[t].d(f),f&&g(s)}}}function nt(i){let l,t,e=i[1].posts.sort(Re),s=[];for(let o=0;o<e.length;o+=1)s[o]=He(Ae(i,e,o));const a=o=>b(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();l=A()},m(o,n){for(let r=0;r<s.length;r+=1)s[r].m(o,n);j(o,l,n),t=!0},p(o,n){if(n&2){e=o[1].posts.sort(Re);let r;for(r=0;r<e.length;r+=1){const f=Ae(o,e,r);s[r]?(s[r].p(f,n),d(s[r],1)):(s[r]=He(f),s[r].c(),d(s[r],1),s[r].m(l.parentNode,l))}for(C(),r=e.length;r<s.length;r+=1)a(r);M()}},i(o){if(!t){for(let n=0;n<e.length;n+=1)d(s[n]);t=!0}},o(o){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)b(s[n]);t=!1},d(o){ae(s,o),o&&g(l)}}}function it(i){let l,t,e,s,a;const o=[ut,ct],n=[];function r(f,_){return _&2&&(l=!!f[1].posts.some(pt)),l?0:1}return t=r(i,-1),e=n[t]=o[t](i),{c(){e.c(),s=A()},m(f,_){n[t].m(f,_),j(f,s,_),a=!0},p(f,_){let m=t;t=r(f,_),t===m?n[t].p(f,_):(C(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(f,_):(e=n[t]=o[t](f),e.c()),d(e,1),e.m(s.parentNode,s))},i(f){a||(d(e),a=!0)},o(f){b(e),a=!1},d(f){n[t].d(f),f&&g(s)}}}function ft(i){let l;return{c(){l=v("h3"),l.textContent="No posts",c(l,"class","svelte-1ft6jvt")},m(t,e){j(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function at(i){let l,t,e=i[1].posts.filter(Te).sort(Ve),s=[];for(let o=0;o<e.length;o+=1)s[o]=Ge(ze(i,e,o));const a=o=>b(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();l=A()},m(o,n){for(let r=0;r<s.length;r+=1)s[r].m(o,n);j(o,l,n),t=!0},p(o,n){if(n&2){e=o[1].posts.filter(Te).sort(Ve);let r;for(r=0;r<e.length;r+=1){const f=ze(o,e,r);s[r]?(s[r].p(f,n),d(s[r],1)):(s[r]=Ge(f),s[r].c(),d(s[r],1),s[r].m(l.parentNode,l))}for(C(),r=e.length;r<s.length;r+=1)a(r);M()}},i(o){if(!t){for(let n=0;n<e.length;n+=1)d(s[n]);t=!0}},o(o){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)b(s[n]);t=!1},d(o){ae(s,o),o&&g(l)}}}function Ge(i){let l,t;return l=new ue({props:{post:i[8],interactive:"full"}}),{c(){ie(l.$$.fragment)},m(e,s){ce(l,e,s),t=!0},p(e,s){const a={};s&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){fe(l,e)}}}function He(i){let l,t;return l=new ue({props:{post:i[8],interactive:"full"}}),{c(){ie(l.$$.fragment)},m(e,s){ce(l,e,s),t=!0},p(e,s){const a={};s&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){fe(l,e)}}}function ct(i){let l;return{c(){l=v("h3"),l.textContent="No posts",c(l,"class","svelte-1ft6jvt")},m(t,e){j(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function ut(i){let l,t,e=i[1].posts.filter(Oe).sort(Qe),s=[];for(let o=0;o<e.length;o+=1)s[o]=Ke(Ee(i,e,o));const a=o=>b(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();l=A()},m(o,n){for(let r=0;r<s.length;r+=1)s[r].m(o,n);j(o,l,n),t=!0},p(o,n){if(n&2){e=o[1].posts.filter(Oe).sort(Qe);let r;for(r=0;r<e.length;r+=1){const f=Ee(o,e,r);s[r]?(s[r].p(f,n),d(s[r],1)):(s[r]=Ke(f),s[r].c(),d(s[r],1),s[r].m(l.parentNode,l))}for(C(),r=e.length;r<s.length;r+=1)a(r);M()}},i(o){if(!t){for(let n=0;n<e.length;n+=1)d(s[n]);t=!0}},o(o){s=s.filter(Boolean);for(let n=0;n<s.length;n+=1)b(s[n]);t=!1},d(o){ae(s,o),o&&g(l)}}}function Ke(i){let l,t;return l=new ue({props:{post:i[8],interactive:"full"}}),{c(){ie(l.$$.fragment)},m(e,s){ce(l,e,s),t=!0},p(e,s){const a={};s&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){fe(l,e)}}}function Le(i){let l,t,e,s,a;const o=[ot,st],n=[];function r(f,_){return f[1].posts?0:1}return t=r(i,-1),e=n[t]=o[t](i),{c(){l=v("div"),e.c(),c(l,"class","svelte-1ft6jvt")},m(f,_){j(f,l,_),n[t].m(l,null),a=!0},p(f,_){let m=t;t=r(f,_),t===m?n[t].p(f,_):(C(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(f,_):(e=n[t]=o[t](f),e.c()),d(e,1),e.m(l,null))},i(f){a||(d(e),s||Be(()=>{s=Ie(l,Je,{duration:100}),s.start()}),a=!0)},o(f){b(e),a=!1},d(f){f&&g(l),n[t].d()}}}function _t(i){let l,t,e,s,a;const o=[lt,tt],n=[];function r(f,_){return f[1]?0:1}return t=r(i,-1),e=n[t]=o[t](i),{c(){l=v("div"),e.c(),c(l,"id","user-wrapper"),c(l,"class","svelte-1ft6jvt")},m(f,_){j(f,l,_),n[t].m(l,null),a=!0},p(f,[_]){let m=t;t=r(f,_),t===m?n[t].p(f,_):(C(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(f,_):(e=n[t]=o[t](f),e.c()),d(e,1),e.m(l,null))},i(f){a||(d(e),s||Be(()=>{s=Ie(l,Je,{duration:100}),s.start()}),a=!0)},o(f){b(e),a=!1},d(f){f&&g(l),n[t].d()}}}const pt=i=>!i.parent,mt=i=>i.media.length,Oe=i=>!i.parent,Qe=({timestamp:i},{timestamp:l})=>i.getDate()-l.getDate(),Re=({timestamp:i},{timestamp:l})=>i.getDate()-l.getDate(),Te=i=>i.media.length,Ve=({timestamp:i},{timestamp:l})=>i.getDate()-l.getDate();function vt(i,l,t){let e,s,a,o;Xe(i,et,m=>t(7,o=m));var n;let{hydrator:r}=l,{params:f={username:void 0}}=l;const _=()=>t(2,s={type:"image",src:"default.png"});return i.$$set=m=>{"hydrator"in m&&t(5,r=m.hydrator),"params"in m&&t(0,f=m.params)},i.$$.update=()=>{if(i.$$.dirty&33){e:t(1,e=r.getUser(f.username))}if(i.$$.dirty&66){e:t(2,s=t(6,n=e==null?void 0:e.profileImage)!==null&&n!==void 0?n:{type:"image",src:"default.png"})}if(i.$$.dirty&128){e:t(3,a=xe.parse(o!=null?o:"").tab)}},[f,e,s,a,_,r,n,o]}class dt extends We{constructor(l){super();Ye(this,l,vt,_t,Fe,{hydrator:5,params:0})}}export default dt;
