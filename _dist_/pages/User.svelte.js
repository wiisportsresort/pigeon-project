import"./User.svelte.css.proxy.js";import{SvelteComponent as Xe,add_render_callback as Be,append as _,attr as u,check_outros as M,component_subscribe as Ye,create_component as ne,create_in_transition as De,destroy_component as ie,destroy_each as ce,detach as g,element as h,empty as H,group_outros as $,init as Ze,insert as w,listen as xe,mount_component as ae,noop as N,safe_not_equal as ue,set_data as S,space as T,text as y,toggle_class as z,transition_in as d,transition_out as b}from"../../_snowpack/pkg/svelte/internal.js";import et from"../../_snowpack/pkg/qs.js";import{querystring as tt}from"../../_snowpack/pkg/svelte-spa-router.js";import{fade as Ie}from"../../_snowpack/pkg/svelte/transition.js";import fe from"../components/PostCard.svelte.js";import{format as Fe}from"../../_snowpack/pkg/date-fns.js";import{formatUserContent as He}from"../util.js";function Le(i,l,t){const e=i.slice();return e[8]=l[t],e}function Je(i,l,t){const e=i.slice();return e[8]=l[t],e}function Se(i,l,t){const e=i.slice();return e[8]=l[t],e}function lt(i){let l,t,e=i[0].username+"",r;return{c(){l=h("h3"),t=y("User not found: @"),r=y(e)},m(a,s){w(a,l,s),_(l,t),_(l,r)},p(a,s){s&1&&e!==(e=a[0].username+"")&&S(r,e)},i:N,o:N,d(a){a&&g(l)}}}function rt(i){var Ce,qe;let l,t,e,r,a,s,n,o=i[1].displayName+"",c,f,m,_e,A=i[1].username+"",ee,pe,L,E=He(i[1].bio)+"",me,D,I,G,K=((Ce=i[1].followers)==null?void 0:Ce.length)+"",te,de,O,he,F,Q,R=((qe=i[1].following)==null?void 0:qe.length)+"",le,be,V,ke,J,ve,W,X=Fe(i[1].joinDate,"MMMM yyy")+"",re,se,C,q,P,ge,Y,we,U,ye,Z,Ne,B,je,x,Me,$e=i[3],v,oe,Te,j=Ge(i);return{c(){l=h("aside"),t=h("div"),e=h("img"),a=T(),s=h("div"),n=h("h1"),c=y(o),f=T(),m=h("span"),_e=y("@"),ee=y(A),pe=T(),L=h("span"),me=T(),D=h("div"),I=h("a"),G=h("b"),te=y(K),de=y(`
              Followers`),he=T(),F=h("a"),Q=h("b"),le=y(R),be=y(`
              Following`),ke=T(),J=h("span"),ve=y("Joined "),W=h("b"),re=y(X),se=T(),C=h("section"),q=h("nav"),P=h("a"),ge=y("Posts"),we=T(),U=h("a"),ye=y("Posts and comments"),Ne=T(),B=h("a"),je=y("Media"),Me=T(),j.c(),e.src!==(r=i[2].src)&&u(e,"src",r),u(e,"alt","profile"),u(e,"id","pfp"),u(e,"class","svelte-rc35ut"),u(t,"id","pfp-wrapper"),u(t,"class","svelte-rc35ut"),u(n,"class","svelte-rc35ut"),u(m,"id","username"),u(m,"class","svelte-rc35ut"),u(L,"id","bio"),u(L,"class","svelte-rc35ut"),u(G,"class","number svelte-rc35ut"),u(I,"href",O=`#/user/${i[1].username}/followers`),u(I,"class","svelte-rc35ut"),u(Q,"class","number svelte-rc35ut"),u(F,"href",V=`#/user/${i[1].username}/following`),u(F,"class","svelte-rc35ut"),u(D,"id","interactions"),u(D,"class","svelte-rc35ut"),u(W,"class","svelte-rc35ut"),u(J,"id","join-date"),u(J,"class","svelte-rc35ut"),u(s,"id","aside-content"),u(s,"class","svelte-rc35ut"),u(l,"class","svelte-rc35ut"),u(P,"class","tab-item svelte-rc35ut"),u(P,"href",Y=`#/user/${i[1].username}?tab=posts`),z(P,"selected",i[3]==="posts"||!i[3]),u(U,"class","tab-item svelte-rc35ut"),u(U,"href",Z=`#/user/${i[1].username}?tab=posts_with_comments`),z(U,"selected",i[3]==="posts_with_comments"),u(B,"class","tab-item svelte-rc35ut"),u(B,"href",x=`#/user/${i[1].username}?tab=media`),z(B,"selected",i[3]==="media"),u(q,"class","tab-list svelte-rc35ut"),u(C,"id","posts"),u(C,"class","svelte-rc35ut")},m(p,k){w(p,l,k),_(l,t),_(t,e),_(l,a),_(l,s),_(s,n),_(n,c),_(s,f),_(s,m),_(m,_e),_(m,ee),_(s,pe),_(s,L),L.innerHTML=E,_(s,me),_(s,D),_(D,I),_(I,G),_(G,te),_(I,de),_(D,he),_(D,F),_(F,Q),_(Q,le),_(F,be),_(s,ke),_(s,J),_(J,ve),_(J,W),_(W,re),w(p,se,k),w(p,C,k),_(C,q),_(q,P),_(P,ge),_(q,we),_(q,U),_(U,ye),_(q,Ne),_(q,B),_(B,je),_(C,Me),j.m(C,null),v=!0,oe||(Te=xe(e,"error",i[4]),oe=!0)},p(p,k){var Pe,Ue;(!v||k&4&&e.src!==(r=p[2].src))&&u(e,"src",r),(!v||k&2)&&o!==(o=p[1].displayName+"")&&S(c,o),(!v||k&2)&&A!==(A=p[1].username+"")&&S(ee,A),(!v||k&2)&&E!==(E=He(p[1].bio)+"")&&(L.innerHTML=E),(!v||k&2)&&K!==(K=((Pe=p[1].followers)==null?void 0:Pe.length)+"")&&S(te,K),(!v||k&2&&O!==(O=`#/user/${p[1].username}/followers`))&&u(I,"href",O),(!v||k&2)&&R!==(R=((Ue=p[1].following)==null?void 0:Ue.length)+"")&&S(le,R),(!v||k&2&&V!==(V=`#/user/${p[1].username}/following`))&&u(F,"href",V),(!v||k&2)&&X!==(X=Fe(p[1].joinDate,"MMMM yyy")+"")&&S(re,X),(!v||k&2&&Y!==(Y=`#/user/${p[1].username}?tab=posts`))&&u(P,"href",Y),k&8&&z(P,"selected",p[3]==="posts"||!p[3]),(!v||k&2&&Z!==(Z=`#/user/${p[1].username}?tab=posts_with_comments`))&&u(U,"href",Z),k&8&&z(U,"selected",p[3]==="posts_with_comments"),(!v||k&2&&x!==(x=`#/user/${p[1].username}?tab=media`))&&u(B,"href",x),k&8&&z(B,"selected",p[3]==="media"),k&8&&ue($e,$e=p[3])?($(),b(j,1,1,N),M(),j=Ge(p),j.c(),d(j),j.m(C,null)):j.p(p,k)},i(p){v||(d(j),v=!0)},o(p){b(j),v=!1},d(p){p&&g(l),p&&g(se),p&&g(C),j.d(p),oe=!1,Te()}}}function st(i){let l;return{c(){l=h("h3"),l.textContent="No posts",u(l,"class","svelte-rc35ut")},m(t,e){w(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function ot(i){let l,t,e,r;const a=[ct,it,nt],s=[];function n(o,c){return o[3]==="posts"||!o[3]?0:o[3]==="posts_with_comments"?1:o[3]==="media"?2:-1}return~(l=n(i,-1))&&(t=s[l]=a[l](i)),{c(){t&&t.c(),e=H()},m(o,c){~l&&s[l].m(o,c),w(o,e,c),r=!0},p(o,c){let f=l;l=n(o,c),l===f?~l&&s[l].p(o,c):(t&&($(),b(s[f],1,1,()=>{s[f]=null}),M()),~l?(t=s[l],t?t.p(o,c):(t=s[l]=a[l](o),t.c()),d(t,1),t.m(e.parentNode,e)):t=null)},i(o){r||(d(t),r=!0)},o(o){b(t),r=!1},d(o){~l&&s[l].d(o),o&&g(e)}}}function nt(i){let l,t,e,r,a;const s=[ut,at],n=[];function o(c,f){return f&2&&(l=!!c[1].posts.some(dt)),l?0:1}return t=o(i,-1),e=n[t]=s[t](i),{c(){e.c(),r=H()},m(c,f){n[t].m(c,f),w(c,r,f),a=!0},p(c,f){let m=t;t=o(c,f),t===m?n[t].p(c,f):($(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(c,f):(e=n[t]=s[t](c),e.c()),d(e,1),e.m(r.parentNode,r))},i(c){a||(d(e),a=!0)},o(c){b(e),a=!1},d(c){n[t].d(c),c&&g(r)}}}function it(i){let l,t,e=[...i[1].posts].sort(Re),r=[];for(let s=0;s<e.length;s+=1)r[s]=Ae(Je(i,e,s));const a=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();l=H()},m(s,n){for(let o=0;o<r.length;o+=1)r[o].m(s,n);w(s,l,n),t=!0},p(s,n){if(n&2){e=[...s[1].posts].sort(Re);let o;for(o=0;o<e.length;o+=1){const c=Je(s,e,o);r[o]?(r[o].p(c,n),d(r[o],1)):(r[o]=Ae(c),r[o].c(),d(r[o],1),r[o].m(l.parentNode,l))}for($(),o=e.length;o<r.length;o+=1)a(o);M()}},i(s){if(!t){for(let n=0;n<e.length;n+=1)d(r[n]);t=!0}},o(s){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)b(r[n]);t=!1},d(s){ce(r,s),s&&g(l)}}}function ct(i){let l,t,e,r,a;const s=[_t,ft],n=[];function o(c,f){return f&2&&(l=!!c[1].posts.some(mt)),l?0:1}return t=o(i,-1),e=n[t]=s[t](i),{c(){e.c(),r=H()},m(c,f){n[t].m(c,f),w(c,r,f),a=!0},p(c,f){let m=t;t=o(c,f),t===m?n[t].p(c,f):($(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(c,f):(e=n[t]=s[t](c),e.c()),d(e,1),e.m(r.parentNode,r))},i(c){a||(d(e),a=!0)},o(c){b(e),a=!1},d(c){n[t].d(c),c&&g(r)}}}function at(i){let l;return{c(){l=h("h3"),l.textContent="No posts",u(l,"class","svelte-rc35ut")},m(t,e){w(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function ut(i){let l,t,e=[...i[1].posts].filter(Ve).sort(We),r=[];for(let s=0;s<e.length;s+=1)r[s]=ze(Le(i,e,s));const a=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();l=H()},m(s,n){for(let o=0;o<r.length;o+=1)r[o].m(s,n);w(s,l,n),t=!0},p(s,n){if(n&2){e=[...s[1].posts].filter(Ve).sort(We);let o;for(o=0;o<e.length;o+=1){const c=Le(s,e,o);r[o]?(r[o].p(c,n),d(r[o],1)):(r[o]=ze(c),r[o].c(),d(r[o],1),r[o].m(l.parentNode,l))}for($(),o=e.length;o<r.length;o+=1)a(o);M()}},i(s){if(!t){for(let n=0;n<e.length;n+=1)d(r[n]);t=!0}},o(s){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)b(r[n]);t=!1},d(s){ce(r,s),s&&g(l)}}}function ze(i){let l,t;return l=new fe({props:{post:i[8],interactive:"full"}}),{c(){ne(l.$$.fragment)},m(e,r){ae(l,e,r),t=!0},p(e,r){const a={};r&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){ie(l,e)}}}function Ae(i){let l,t;return l=new fe({props:{post:i[8],interactive:"full"}}),{c(){ne(l.$$.fragment)},m(e,r){ae(l,e,r),t=!0},p(e,r){const a={};r&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){ie(l,e)}}}function ft(i){let l;return{c(){l=h("h3"),l.textContent="No posts",u(l,"class","svelte-rc35ut")},m(t,e){w(t,l,e)},p:N,i:N,o:N,d(t){t&&g(l)}}}function _t(i){let l,t,e=[...i[1].posts].filter(Oe).sort(Qe),r=[];for(let s=0;s<e.length;s+=1)r[s]=Ee(Se(i,e,s));const a=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();l=H()},m(s,n){for(let o=0;o<r.length;o+=1)r[o].m(s,n);w(s,l,n),t=!0},p(s,n){if(n&2){e=[...s[1].posts].filter(Oe).sort(Qe);let o;for(o=0;o<e.length;o+=1){const c=Se(s,e,o);r[o]?(r[o].p(c,n),d(r[o],1)):(r[o]=Ee(c),r[o].c(),d(r[o],1),r[o].m(l.parentNode,l))}for($(),o=e.length;o<r.length;o+=1)a(o);M()}},i(s){if(!t){for(let n=0;n<e.length;n+=1)d(r[n]);t=!0}},o(s){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)b(r[n]);t=!1},d(s){ce(r,s),s&&g(l)}}}function Ee(i){let l,t;return l=new fe({props:{post:i[8],interactive:"full"}}),{c(){ne(l.$$.fragment)},m(e,r){ae(l,e,r),t=!0},p(e,r){const a={};r&2&&(a.post=e[8]),l.$set(a)},i(e){t||(d(l.$$.fragment,e),t=!0)},o(e){b(l.$$.fragment,e),t=!1},d(e){ie(l,e)}}}function Ge(i){let l,t,e,r,a;const s=[ot,st],n=[];function o(c,f){return c[1].posts?0:1}return t=o(i,-1),e=n[t]=s[t](i),{c(){l=h("div"),e.c(),u(l,"class","svelte-rc35ut")},m(c,f){w(c,l,f),n[t].m(l,null),a=!0},p(c,f){let m=t;t=o(c,f),t===m?n[t].p(c,f):($(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(c,f):(e=n[t]=s[t](c),e.c()),d(e,1),e.m(l,null))},i(c){a||(d(e),r||Be(()=>{r=De(l,Ie,{duration:100}),r.start()}),a=!0)},o(c){b(e),a=!1},d(c){c&&g(l),n[t].d()}}}function Ke(i){let l,t,e,r,a;const s=[rt,lt],n=[];function o(c,f){return c[1]?0:1}return t=o(i,-1),e=n[t]=s[t](i),{c(){l=h("div"),e.c(),u(l,"id","user-wrapper"),u(l,"class","svelte-rc35ut")},m(c,f){w(c,l,f),n[t].m(l,null),a=!0},p(c,f){let m=t;t=o(c,f),t===m?n[t].p(c,f):($(),b(n[m],1,1,()=>{n[m]=null}),M(),e=n[t],e?e.p(c,f):(e=n[t]=s[t](c),e.c()),d(e,1),e.m(l,null))},i(c){a||(d(e),r||Be(()=>{r=De(l,Ie,{duration:100}),r.start()}),a=!0)},o(c){b(e),a=!1},d(c){c&&g(l),n[t].d()}}}function pt(i){let l=i[1],t,e,r=Ke(i);return{c(){r.c(),t=H()},m(a,s){r.m(a,s),w(a,t,s),e=!0},p(a,[s]){s&2&&ue(l,l=a[1])?($(),b(r,1,1,N),M(),r=Ke(a),r.c(),d(r),r.m(t.parentNode,t)):r.p(a,s)},i(a){e||(d(r),e=!0)},o(a){b(r),e=!1},d(a){a&&g(t),r.d(a)}}}const mt=i=>!i.parent,dt=i=>i.media.length,Oe=i=>!i.parent,Qe=({timestamp:i},{timestamp:l})=>l.getTime()-i.getTime(),Re=({timestamp:i},{timestamp:l})=>l.getTime()-i.getTime(),Ve=i=>i.media.length,We=({timestamp:i},{timestamp:l})=>l.getTime()-i.getTime();function ht(i,l,t){let e,r,a,s;Ye(i,tt,m=>t(7,s=m));var n;let{hydrator:o}=l,{params:c={username:void 0}}=l;const f=()=>t(2,r={type:"image",src:"default.png"});return i.$$set=m=>{"hydrator"in m&&t(5,o=m.hydrator),"params"in m&&t(0,c=m.params)},i.$$.update=()=>{if(i.$$.dirty&33){e:t(1,e=o.getUser(c.username))}if(i.$$.dirty&66){e:t(2,r=t(6,n=e==null?void 0:e.profileImage)!==null&&n!==void 0?n:{type:"image",src:"default.png"})}if(i.$$.dirty&128){e:t(3,a=et.parse(s!=null?s:"").tab)}},[c,e,r,a,f,o,n,s]}class bt extends Xe{constructor(l){super();Ze(this,l,ht,pt,ue,{hydrator:5,params:0})}}export default bt;
