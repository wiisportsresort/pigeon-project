{"version":3,"names":[],"sources":["User.svelte"],"sourcesContent":["<script lang=\"ts\">var _a;\n;\nimport qs from 'qs';\nimport { querystring } from 'svelte-spa-router';\nimport { fade } from 'svelte/transition';\nimport PostCard from '../components/PostCard.svelte';\nimport { format } from 'date-fns';\nimport { formatUserContent } from '../util';\nexport let hydrator;\nexport let params = { username: undefined };\n$: user = hydrator.getUser(params.username);\n$: profileImage = (_a = user === null || user === void 0 ? void 0 : user.profileImage) !== null && _a !== void 0 ? _a : { type: 'image', src: 'default.png' };\n$: tab = qs.parse($querystring !== null && $querystring !== void 0 ? $querystring : '').tab;\nconst setDefaultProfileImage = () => (profileImage = { type: 'image', src: 'default.png' });\n//# sourceMappingURL=User.svelte.js.map</script>\n\n<style lang=\"scss\">#user-wrapper {\n  display: flex;\n  max-width: 892px;\n  justify-content: space-between;\n  margin: 0 auto;\n}\n@media screen and (max-width: 760px) {\n  #user-wrapper {\n    flex-direction: column;\n    align-items: center;\n  }\n  #user-wrapper aside {\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n  #user-wrapper aside h1 {\n    margin-top: 0;\n  }\n  #user-wrapper aside #pfp {\n    width: 8rem;\n    height: 8rem;\n  }\n  #user-wrapper aside #aside-content {\n    margin-left: 1rem;\n    max-height: 9.5rem;\n  }\n  #user-wrapper #posts {\n    width: 100%;\n    margin-top: 32px;\n  }\n}\n\n@media screen and (min-width: 760px) {\n  aside {\n    max-width: 260px;\n  }\n}\naside #pfp-wrapper {\n  display: flex;\n  justify-items: center;\n}\naside #pfp-wrapper #pfp {\n  border-radius: 50%;\n  width: 250px;\n  height: 250px;\n  border: 0.25rem solid #cbd5e1;\n  object-fit: cover;\n}\naside h1 {\n  margin-bottom: 0.25rem;\n}\naside #username {\n  font-size: 16px;\n  color: #64748b;\n  margin-bottom: 8px;\n  display: block;\n}\naside #bio {\n  display: block;\n  margin-bottom: 8px;\n}\naside #bio :global(a) {\n  color: #3b82f6;\n  transition: color 150ms ease-in-out;\n  text-decoration: none;\n}\naside #bio :global(a):hover {\n  color: #1d4ed8;\n}\naside #interactions {\n  display: flex;\n}\naside #interactions a {\n  color: #475569;\n  text-decoration: none;\n  margin-right: 6px;\n}\naside #interactions a .number {\n  color: #1e293b;\n}\naside #interactions a:hover {\n  text-decoration: underline;\n}\naside #join-date {\n  display: block;\n  margin-top: 0.5rem;\n  color: #475569;\n}\naside #join-date b {\n  color: #1e293b;\n}\n\n#posts {\n  flex-grow: 1;\n}\n@media screen and (min-width: 760px) {\n  #posts {\n    max-width: 600px;\n  }\n}\n#posts nav {\n  display: flex;\n  height: 40px;\n}\n#posts nav :first-child {\n  border-top-left-radius: 4px;\n}\n#posts nav :last-child {\n  border-top-right-radius: 4px;\n}\n#posts nav .tab-item {\n  flex-grow: 1;\n  text-decoration: none;\n  color: black;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 2px;\n  border-bottom: 2px solid #dbeafe;\n  background-color: #dbeafe;\n  transition: background-color 75ms linear, border-color 75ms linear;\n}\n#posts nav .tab-item:hover {\n  background-color: #c2dcfd;\n  border-color: #c2dcfd;\n}\n#posts nav .tab-item.selected {\n  border-color: #60a5fa;\n  font-weight: 600;\n}</style>\n\n{#key user}\n  <div in:fade={{ duration: 100 }} id=\"user-wrapper\">\n    {#if user}\n      <aside>\n        <div id=\"pfp-wrapper\">\n          <img src={profileImage.src} on:error={setDefaultProfileImage} alt=\"profile\" id=\"pfp\" />\n        </div>\n        <div id=\"aside-content\">\n          <h1>{user.displayName}</h1>\n          <span id=\"username\">@{user.username}</span>\n          <span id=\"bio\">{@html formatUserContent(user.bio)}</span>\n          <div id=\"interactions\">\n            <a href={`#/user/${user.username}/followers`}>\n              <b class=\"number\">{user.followers?.length}</b>\n              Followers\n            </a>\n            <a href={`#/user/${user.username}/following`}>\n              <b class=\"number\">{user.following?.length}</b>\n              Following\n            </a>\n          </div>\n          <span id=\"join-date\">Joined <b>{format(user.joinDate, 'MMMM yyy')}</b></span>\n        </div>\n      </aside>\n      <section id=\"posts\">\n        <nav class=\"tab-list\">\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'posts' || !tab}\n            href={`#/user/${user.username}?tab=posts`}>Posts</a\n          >\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'posts_with_comments'}\n            href={`#/user/${user.username}?tab=posts_with_comments`}>Posts and comments</a\n          >\n          <a\n            class=\"tab-item\"\n            class:selected={tab === 'media'}\n            href={`#/user/${user.username}?tab=media`}>Media</a\n          >\n        </nav>\n        {#key tab}\n          <div in:fade={{ duration: 100 }}>\n            {#if user.posts}\n              {#if tab === 'posts' || !tab}\n                {#if user.posts.some(p => !p.parent)}\n                  {#each [...user.posts]\n                    .filter(p => !p.parent)\n                    .sort(\n                      ({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()\n                    ) as post}\n                    <PostCard {post} interactive=\"full\" />\n                  {/each}\n                {:else}\n                  <h3>No posts</h3>\n                {/if}\n              {:else if tab === 'posts_with_comments'}\n                {#each [...user.posts].sort(({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()) as post}\n                  <PostCard {post} interactive=\"full\" />\n                {/each}\n              {:else if tab === 'media'}\n                {#if user.posts.some(p => p.media.length)}\n                  {#each [...user.posts]\n                    .filter(p => p.media.length)\n                    .sort(\n                      ({ timestamp: a }, { timestamp: b }) => b.getTime() - a.getTime()\n                    ) as post}\n                    <PostCard {post} interactive=\"full\" />\n                  {/each}\n                {:else}\n                  <h3>No posts</h3>\n                {/if}\n              {/if}\n            {:else}\n              <h3>No posts</h3>\n            {/if}\n          </div>\n        {/key}\n      </section>\n    {:else}\n      <h3>User not found: @{params.username}</h3>\n    {/if}\n  </div>\n{/key}\n"],"mappings":"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"}